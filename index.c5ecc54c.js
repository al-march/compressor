import{I as m,S as p,C as S}from"./chunks/ImageDropZone.b4a97d8d.js";import{c as u,o as g,l as R,g as h,u as I,t as A,b as i,j as C,M as f}from"./chunks/web.0e38cc26.js";import{d as P}from"./chunks/download.75ec1577.js";/* empty css                              */const a={FINETUNE:"Finetune",FILTERS:"Filters",ADJUST:"Adjust",WATERMARK:"Watermark",ANNOTATE:"Annotate",RESIZE:"Resize"},F={CROP:"Crop",ROTATE:"Rotate",FLIP_X:"Flip_X",FLIP_Y:"Flip_Y",BRIGHTNESS:"Brightness",CONTRAST:"Contrast",HSV:"HueSaturationValue",WARMTH:"Warmth",BLUR:"Blur",THRESHOLD:"Threshold",POSTERIZE:"Posterize",PIXELATE:"Pixelate",NOISE:"Noise",FILTERS:"Filters",RECT:"Rect",ELLIPSE:"Ellipse",POLYGON:"Polygon",TEXT:"Text",LINE:"Line",IMAGE:"Image",ARROW:"Arrow",WATERMARK:"Watermark",PEN:"Pen",RESIZE:"Resize"};class y{static getConfig(){return{annotationsCommon:{fill:"#ff0000"},Text:{text:"Filerobot..."},Rotate:{angle:90,componentType:"slider"},translations:{profile:"Profile",coverPhoto:"Cover photo",facebook:"Facebook",socialMedia:"Social Media",fbProfileSize:"180x180px",fbCoverPhotoSize:"820x312px"},Crop:{presetsItems:[{titleKey:"classicTv",descriptionKey:"4:3",ratio:4/3},{titleKey:"cinemascope",descriptionKey:"21:9",ratio:21/9}],presetsFolders:[{titleKey:"socialMedia",groups:[{titleKey:"facebook",items:[{titleKey:"profile",width:180,height:180,descriptionKey:"fbProfileSize"},{titleKey:"coverPhoto",width:820,height:312,descriptionKey:"fbCoverPhotoSize"}]}]}]},tabsIds:[a.RESIZE,a.ADJUST,a.ANNOTATE],defaultTabId:a.ADJUST,defaultToolId:F.CROP}}}const N=A('<div id="image-editor"></div>'),O=t=>{const[r,n]=u(),[o,c]=u();g(()=>{setTimeout(()=>{l()})}),R(()=>{const e=o();e&&e.terminate()});function l(){const e=r();if(e){const s=new FilerobotImageEditor(e,{...y.getConfig(),source:t.source,onSave:d,onClose:E});s.render(),c(s)}}function E(e){t.onClose?.()}async function d(e,s){console.log(s);const T=await L(e.imageBase64||"",e.fullName||"",e.mimeType);return P.file(T)}return(()=>{const e=h(N);return I(n,e),e})()};function L(t,r,n){return fetch(t).then(function(o){return o.arrayBuffer()}).then(function(o){return new File([o],r,{type:n})})}const M=()=>{const[t,r]=u("");async function n(o){const[c]=o,l=await S.createSrc(c);r(l)}return i(p,{get children(){return i(C,{get children(){return[i(f,{get when(){return!t()},get children(){return i(m,{onDropFiles:n})}}),i(f,{get when(){return!!t()},get children(){return i(O,{get source(){return t()},onClose:()=>r("")})}})]}})}})};export{M as Editor};
