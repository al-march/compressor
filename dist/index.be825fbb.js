import{c as R,o as Gt,g as $,u as Ct,i as O,a as B,b as Zt,d as y,P as Qt,S as F,e as Jt,M as Le,t as _,f as Ue,h as st,j as Kt,s as xe,k as D,r as Z,l as er,m as At,F as Ar,n as Pr,p as Pt}from"./chunks/web.3986203b.js";import{c as Tr}from"./chunks/store.f3e4063d.js";import{c as tr,a as jr,i as at,d as rr,C as Ke,b as kr,D as Ir,A as Rr}from"./chunks/CompressDropZone.87b9a43a.js";import{T as Dr,S as nr,a as Br}from"./chunks/Scale.e75121d6.js";import{L as He}from"./chunks/Loader.e850ec40.js";import{I as Mr}from"./chunks/ImageCompareSlider.faa8b253.js";/* empty css                              */var et=function(e,t){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},et(e,t)};function ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");et(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function tt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function ue(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Y(e){return typeof e=="function"}function ir(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Ze=ir(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Fe(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Se=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=tt(s),c=a.next();!c.done;c=a.next()){var u=c.value;u.remove(this)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var l=this.initialTeardown;if(Y(l))try{l()}catch(p){o=p instanceof Ze?p.errors:[p]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var d=tt(m),f=d.next();!f.done;f=d.next()){var v=f.value;try{Tt(v)}catch(p){o=o??[],p instanceof Ze?o=ue(ue([],ce(o)),ce(p.errors)):o.push(p)}}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}if(o)throw new Ze(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Tt(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Fe(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Fe(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),or=Se.EMPTY;function sr(e){return e instanceof Se||e&&"closed"in e&&Y(e.remove)&&Y(e.add)&&Y(e.unsubscribe)}function Tt(e){Y(e)?e():e.unsubscribe()}var lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},rt={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=rt.delegate;return i?.setTimeout?i.setTimeout.apply(i,ue([e,t],ce(r))):setTimeout.apply(void 0,ue([e,t],ce(r)))},clearTimeout:function(e){var t=rt.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Lr(e){rt.setTimeout(function(){throw e})}function jt(){}var ke=null;function Be(e){if(lt.useDeprecatedSynchronousErrorHandling){var t=!ke;if(t&&(ke={errorThrown:!1,error:null}),e(),t){var r=ke,n=r.errorThrown,i=r.error;if(ke=null,n)throw i}}else e()}var ct=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,sr(r)&&r.add(n)):n.destination=Wr,n}return t.create=function(r,n,i){return new nt(r,n,i)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Se),Hr=Function.prototype.bind;function Qe(e,t){return Hr.call(e,t)}var Fr=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){Ie(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){Ie(n)}else Ie(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Ie(r)}},e}(),nt=function(e){ee(t,e);function t(r,n,i){var o=e.call(this)||this,s;if(Y(r)||!r)s={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;o&&lt.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},s={next:r.next&&Qe(r.next,a),error:r.error&&Qe(r.error,a),complete:r.complete&&Qe(r.complete,a)}):s=r}return o.destination=new Fr(s),o}return t}(ct);function Ie(e){Lr(e)}function zr(e){throw e}var Wr={closed:!0,next:jt,error:zr,complete:jt},Vr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ur(e){return e}function qr(e){return e.length===0?Ur:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}var kt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,o=Nr(t)?t:new nt(t,r,n);return Be(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=It(r),new r(function(i,o){var s=new nt({next:function(a){try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Vr]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return qr(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=It(t),new t(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();function It(e){var t;return(t=e??lt.Promise)!==null&&t!==void 0?t:Promise}function Yr(e){return e&&Y(e.next)&&Y(e.error)&&Y(e.complete)}function Nr(e){return e&&e instanceof ct||Yr(e)&&sr(e)}function Xr(e){return Y(e?.lift)}function Gr(e){return function(t){if(Xr(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zr(e,t,r,n,i){return new Qr(e,t,r,n,i)}var Qr=function(e){ee(t,e);function t(r,n,i,o,s,a){var c=e.call(this,r)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=n?function(u){try{n(u)}catch(l){r.error(l)}}:e.prototype._next,c._error=o?function(u){try{o(u)}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(ct),Jr=ir(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ut=function(e){ee(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new Rt(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new Jr},t.prototype.next=function(r){var n=this;Be(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=tt(n.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(r)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;Be(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;Be(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?or:(this.currentObservers=null,a.push(r),new Se(function(){n.currentObservers=null,Fe(a,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?r.error(o):s&&r.complete()},t.prototype.asObservable=function(){var r=new kt;return r.source=this,r},t.create=function(r,n){return new Rt(r,n)},t}(kt),Rt=function(e){ee(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:or},t}(ut),ar={now:function(){return(ar.delegate||Date).now()},delegate:void 0},Kr=function(e){ee(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t}(Se),ze={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=ze.delegate;return i?.setInterval?i.setInterval.apply(i,ue([e,t],ce(r))):setInterval.apply(void 0,ue([e,t],ce(r)))},clearInterval:function(e){var t=ze.delegate;return(t?.clearInterval||clearInterval)(e)},delegate:void 0},en=function(e){ee(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),ze.setInterval(r.flush.bind(r,this),i)},t.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&ze.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Fe(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Kr),Dt=function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=ar.now,e}(),tn=function(e){ee(t,e);function t(r,n){n===void 0&&(n=Dt.now);var i=e.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},t}(Dt),rn=new tn(en);function lr(e,t){return t===void 0&&(t=rn),Gr(function(r,n){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var u=o;o=null,n.next(u)}};function c(){var u=s+e,l=t.now();if(l<u){i=this.schedule(void 0,u-l),n.add(i);return}a()}r.subscribe(Zr(n,function(u){o=u,s=t.now(),i||(i=t.schedule(c,e),n.add(i))},function(){a(),n.complete()},void 0,function(){o=i=null}))})}const cr=new ut,nn={quality:.8},ur=new ut,[Q,he]=Tr({images:new Set,settings:nn,shouldRecompress$:ur.pipe(lr(200))});function on(e){Q.images.add(e),he("images",new Set(Q.images))}function sn(e){const t=new Set(Q.images);e.forEach(r=>t.add(r)),he("images",t)}function an(e){const t=new Set(Q.images);t.delete(e),he("images",t)}function ln(e){Q.images.add(e),he("images",new Set(Q.images))}function cn(){he("images",new Set)}function fr(e){he("settings",e),cr.next(e)}function un(e){const t=Object.assign({...Q.settings},e);fr(t)}function pr(){ur.next({...Q.settings})}cr.pipe(lr(300)).subscribe(()=>{console.log("recompress"),pr()});const We=Object.assign({},{state:Q,setImage:on,setImages:sn,removeImage:an,compressImage:ln,reset:cn,setSettings:fr,mergeSettings:un,recompressAll:pr});var M="top",W="bottom",V="right",L="left",ft="auto",Oe=[M,W,V,L],fe="start",$e="end",fn="clippingParents",dr="viewport",be="popper",pn="reference",Bt=Oe.reduce(function(e,t){return e.concat([t+"-"+fe,t+"-"+$e])},[]),vr=[].concat(Oe,[ft]).reduce(function(e,t){return e.concat([t,t+"-"+fe,t+"-"+$e])},[]),dn="beforeRead",vn="read",hn="afterRead",mn="beforeMain",gn="main",bn="afterMain",yn="beforeWrite",wn="write",xn="afterWrite",$n=[dn,vn,hn,mn,gn,bn,yn,wn,xn];function X(e){return e?(e.nodeName||"").toLowerCase():null}function U(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ae(e){var t=U(e).Element;return e instanceof t||e instanceof Element}function z(e){var t=U(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function pt(e){if(typeof ShadowRoot>"u")return!1;var t=U(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function _n(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!z(o)||!X(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function Sn(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=s.reduce(function(c,u){return c[u]="",c},{});!z(i)||!X(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}}const On={name:"applyStyles",enabled:!0,phase:"write",fn:_n,effect:Sn,requires:["computeStyles"]};function N(e){return e.split("-")[0]}var se=Math.max,Ve=Math.min,pe=Math.round;function it(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function hr(){return!/^((?!chrome|android).)*safari/i.test(it())}function de(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&z(e)&&(i=e.offsetWidth>0&&pe(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&pe(n.height)/e.offsetHeight||1);var s=ae(e)?U(e):window,a=s.visualViewport,c=!hr()&&r,u=(n.left+(c&&a?a.offsetLeft:0))/i,l=(n.top+(c&&a?a.offsetTop:0))/o,m=n.width/i,d=n.height/o;return{width:m,height:d,top:l,right:u+m,bottom:l+d,left:u,x:u,y:l}}function dt(e){var t=de(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function mr(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&pt(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function J(e){return U(e).getComputedStyle(e)}function En(e){return["table","td","th"].indexOf(X(e))>=0}function te(e){return((ae(e)?e.ownerDocument:e.document)||window.document).documentElement}function qe(e){return X(e)==="html"?e:e.assignedSlot||e.parentNode||(pt(e)?e.host:null)||te(e)}function Mt(e){return!z(e)||J(e).position==="fixed"?null:e.offsetParent}function Cn(e){var t=/firefox/i.test(it()),r=/Trident/i.test(it());if(r&&z(e)){var n=J(e);if(n.position==="fixed")return null}var i=qe(e);for(pt(i)&&(i=i.host);z(i)&&["html","body"].indexOf(X(i))<0;){var o=J(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Ee(e){for(var t=U(e),r=Mt(e);r&&En(r)&&J(r).position==="static";)r=Mt(r);return r&&(X(r)==="html"||X(r)==="body"&&J(r).position==="static")?t:r||Cn(e)||t}function vt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ye(e,t,r){return se(e,Ve(t,r))}function An(e,t,r){var n=ye(e,t,r);return n>r?r:n}function gr(){return{top:0,right:0,bottom:0,left:0}}function br(e){return Object.assign({},gr(),e)}function yr(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Pn=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,br(typeof t!="number"?t:yr(t,Oe))};function Tn(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,a=N(r.placement),c=vt(a),u=[L,V].indexOf(a)>=0,l=u?"height":"width";if(!(!o||!s)){var m=Pn(i.padding,r),d=dt(o),f=c==="y"?M:L,v=c==="y"?W:V,p=r.rects.reference[l]+r.rects.reference[c]-s[c]-r.rects.popper[l],h=s[c]-r.rects.reference[c],b=Ee(o),S=b?c==="y"?b.clientHeight||0:b.clientWidth||0:0,C=p/2-h/2,g=m[f],w=S-d[l]-m[v],E=S/2-d[l]/2+C,P=ye(g,E,w),j=c;r.modifiersData[n]=(t={},t[j]=P,t.centerOffset=P-E,t)}}function jn(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!mr(t.elements.popper,i)||(t.elements.arrow=i))}const kn={name:"arrow",enabled:!0,phase:"main",fn:Tn,effect:jn,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ve(e){return e.split("-")[1]}var In={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Rn(e){var t=e.x,r=e.y,n=window,i=n.devicePixelRatio||1;return{x:pe(t*i)/i||0,y:pe(r*i)/i||0}}function Lt(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,c=e.gpuAcceleration,u=e.adaptive,l=e.roundOffsets,m=e.isFixed,d=s.x,f=d===void 0?0:d,v=s.y,p=v===void 0?0:v,h=typeof l=="function"?l({x:f,y:p}):{x:f,y:p};f=h.x,p=h.y;var b=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),C=L,g=M,w=window;if(u){var E=Ee(r),P="clientHeight",j="clientWidth";if(E===U(r)&&(E=te(r),J(E).position!=="static"&&a==="absolute"&&(P="scrollHeight",j="scrollWidth")),E=E,i===M||(i===L||i===V)&&o===$e){g=W;var x=m&&E===w&&w.visualViewport?w.visualViewport.height:E[P];p-=x-n.height,p*=c?1:-1}if(i===L||(i===M||i===W)&&o===$e){C=V;var A=m&&E===w&&w.visualViewport?w.visualViewport.width:E[j];f-=A-n.width,f*=c?1:-1}}var T=Object.assign({position:a},u&&In),I=l===!0?Rn({x:f,y:p}):{x:f,y:p};if(f=I.x,p=I.y,c){var k;return Object.assign({},T,(k={},k[g]=S?"0":"",k[C]=b?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",k))}return Object.assign({},T,(t={},t[g]=S?p+"px":"",t[C]=b?f+"px":"",t.transform="",t))}function Dn(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,s=o===void 0?!0:o,a=r.roundOffsets,c=a===void 0?!0:a,u={placement:N(t.placement),variation:ve(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Lt(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Lt(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Bn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Dn,data:{}};var Re={passive:!0};function Mn(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,s=n.resize,a=s===void 0?!0:s,c=U(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(l){l.addEventListener("scroll",r.update,Re)}),a&&c.addEventListener("resize",r.update,Re),function(){o&&u.forEach(function(l){l.removeEventListener("scroll",r.update,Re)}),a&&c.removeEventListener("resize",r.update,Re)}}const Ln={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Mn,data:{}};var Hn={left:"right",right:"left",bottom:"top",top:"bottom"};function Me(e){return e.replace(/left|right|bottom|top/g,function(t){return Hn[t]})}var Fn={start:"end",end:"start"};function Ht(e){return e.replace(/start|end/g,function(t){return Fn[t]})}function ht(e){var t=U(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function mt(e){return de(te(e)).left+ht(e).scrollLeft}function zn(e,t){var r=U(e),n=te(e),i=r.visualViewport,o=n.clientWidth,s=n.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var u=hr();(u||!u&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+mt(e),y:c}}function Wn(e){var t,r=te(e),n=ht(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=se(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=se(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+mt(e),c=-n.scrollTop;return J(i||r).direction==="rtl"&&(a+=se(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}function gt(e){var t=J(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function wr(e){return["html","body","#document"].indexOf(X(e))>=0?e.ownerDocument.body:z(e)&&gt(e)?e:wr(qe(e))}function we(e,t){var r;t===void 0&&(t=[]);var n=wr(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=U(n),s=i?[o].concat(o.visualViewport||[],gt(n)?n:[]):n,a=t.concat(s);return i?a:a.concat(we(qe(s)))}function ot(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Vn(e,t){var r=de(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Ft(e,t,r){return t===dr?ot(zn(e,r)):ae(t)?Vn(t,r):ot(Wn(te(e)))}function Un(e){var t=we(qe(e)),r=["absolute","fixed"].indexOf(J(e).position)>=0,n=r&&z(e)?Ee(e):e;return ae(n)?t.filter(function(i){return ae(i)&&mr(i,n)&&X(i)!=="body"}):[]}function qn(e,t,r,n){var i=t==="clippingParents"?Un(e):[].concat(t),o=[].concat(i,[r]),s=o[0],a=o.reduce(function(c,u){var l=Ft(e,u,n);return c.top=se(l.top,c.top),c.right=Ve(l.right,c.right),c.bottom=Ve(l.bottom,c.bottom),c.left=se(l.left,c.left),c},Ft(e,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function xr(e){var t=e.reference,r=e.element,n=e.placement,i=n?N(n):null,o=n?ve(n):null,s=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,c;switch(i){case M:c={x:s,y:t.y-r.height};break;case W:c={x:s,y:t.y+t.height};break;case V:c={x:t.x+t.width,y:a};break;case L:c={x:t.x-r.width,y:a};break;default:c={x:t.x,y:t.y}}var u=i?vt(i):null;if(u!=null){var l=u==="y"?"height":"width";switch(o){case fe:c[u]=c[u]-(t[l]/2-r[l]/2);break;case $e:c[u]=c[u]+(t[l]/2-r[l]/2);break}}return c}function _e(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,s=o===void 0?e.strategy:o,a=r.boundary,c=a===void 0?fn:a,u=r.rootBoundary,l=u===void 0?dr:u,m=r.elementContext,d=m===void 0?be:m,f=r.altBoundary,v=f===void 0?!1:f,p=r.padding,h=p===void 0?0:p,b=br(typeof h!="number"?h:yr(h,Oe)),S=d===be?pn:be,C=e.rects.popper,g=e.elements[v?S:d],w=qn(ae(g)?g:g.contextElement||te(e.elements.popper),c,l,s),E=de(e.elements.reference),P=xr({reference:E,element:C,strategy:"absolute",placement:i}),j=ot(Object.assign({},C,P)),x=d===be?j:E,A={top:w.top-x.top+b.top,bottom:x.bottom-w.bottom+b.bottom,left:w.left-x.left+b.left,right:x.right-w.right+b.right},T=e.modifiersData.offset;if(d===be&&T){var I=T[i];Object.keys(A).forEach(function(k){var G=[V,W].indexOf(k)>=0?1:-1,re=[M,W].indexOf(k)>=0?"y":"x";A[k]+=I[re]*G})}return A}function Yn(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,s=r.padding,a=r.flipVariations,c=r.allowedAutoPlacements,u=c===void 0?vr:c,l=ve(n),m=l?a?Bt:Bt.filter(function(v){return ve(v)===l}):Oe,d=m.filter(function(v){return u.indexOf(v)>=0});d.length===0&&(d=m);var f=d.reduce(function(v,p){return v[p]=_e(e,{placement:p,boundary:i,rootBoundary:o,padding:s})[N(p)],v},{});return Object.keys(f).sort(function(v,p){return f[v]-f[p]})}function Nn(e){if(N(e)===ft)return[];var t=Me(e);return[Ht(e),t,Ht(t)]}function Xn(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,a=s===void 0?!0:s,c=r.fallbackPlacements,u=r.padding,l=r.boundary,m=r.rootBoundary,d=r.altBoundary,f=r.flipVariations,v=f===void 0?!0:f,p=r.allowedAutoPlacements,h=t.options.placement,b=N(h),S=b===h,C=c||(S||!v?[Me(h)]:Nn(h)),g=[h].concat(C).reduce(function(le,K){return le.concat(N(K)===ft?Yn(t,{placement:K,boundary:l,rootBoundary:m,padding:u,flipVariations:v,allowedAutoPlacements:p}):K)},[]),w=t.rects.reference,E=t.rects.popper,P=new Map,j=!0,x=g[0],A=0;A<g.length;A++){var T=g[A],I=N(T),k=ve(T)===fe,G=[M,W].indexOf(I)>=0,re=G?"width":"height",H=_e(t,{placement:T,boundary:l,rootBoundary:m,altBoundary:d,padding:u}),q=G?k?V:L:k?W:M;w[re]>E[re]&&(q=Me(q));var Ce=Me(q),ne=[];if(o&&ne.push(H[I]<=0),a&&ne.push(H[q]<=0,H[Ce]<=0),ne.every(function(le){return le})){x=T,j=!1;break}P.set(T,ne)}if(j)for(var Ae=v?3:1,Ye=function(K){var ge=g.find(function(Te){var ie=P.get(Te);if(ie)return ie.slice(0,K).every(function(Ne){return Ne})});if(ge)return x=ge,"break"},me=Ae;me>0;me--){var Pe=Ye(me);if(Pe==="break")break}t.placement!==x&&(t.modifiersData[n]._skip=!0,t.placement=x,t.reset=!0)}}const Gn={name:"flip",enabled:!0,phase:"main",fn:Xn,requiresIfExists:["offset"],data:{_skip:!1}};function zt(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Wt(e){return[M,V,W,L].some(function(t){return e[t]>=0})}function Zn(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=_e(t,{elementContext:"reference"}),a=_e(t,{altBoundary:!0}),c=zt(s,n),u=zt(a,i,o),l=Wt(c),m=Wt(u);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":m})}const Qn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zn};function Jn(e,t,r){var n=N(e),i=[L,M].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[L,V].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}function Kn(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,s=vr.reduce(function(l,m){return l[m]=Jn(m,t.rects,o),l},{}),a=s[t.placement],c=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=s}const ei={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Kn};function ti(e){var t=e.state,r=e.name;t.modifiersData[r]=xr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const ri={name:"popperOffsets",enabled:!0,phase:"read",fn:ti,data:{}};function ni(e){return e==="x"?"y":"x"}function ii(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,a=s===void 0?!1:s,c=r.boundary,u=r.rootBoundary,l=r.altBoundary,m=r.padding,d=r.tether,f=d===void 0?!0:d,v=r.tetherOffset,p=v===void 0?0:v,h=_e(t,{boundary:c,rootBoundary:u,padding:m,altBoundary:l}),b=N(t.placement),S=ve(t.placement),C=!S,g=vt(b),w=ni(g),E=t.modifiersData.popperOffsets,P=t.rects.reference,j=t.rects.popper,x=typeof p=="function"?p(Object.assign({},t.rects,{placement:t.placement})):p,A=typeof x=="number"?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(!!E){if(o){var k,G=g==="y"?M:L,re=g==="y"?W:V,H=g==="y"?"height":"width",q=E[g],Ce=q+h[G],ne=q-h[re],Ae=f?-j[H]/2:0,Ye=S===fe?P[H]:j[H],me=S===fe?-j[H]:-P[H],Pe=t.elements.arrow,le=f&&Pe?dt(Pe):{width:0,height:0},K=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:gr(),ge=K[G],Te=K[re],ie=ye(0,P[H],le[H]),Ne=C?P[H]/2-Ae-ie-ge-A.mainAxis:Ye-ie-ge-A.mainAxis,$r=C?-P[H]/2+Ae+ie+Te+A.mainAxis:me+ie+Te+A.mainAxis,Xe=t.elements.arrow&&Ee(t.elements.arrow),_r=Xe?g==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,bt=(k=T?.[g])!=null?k:0,Sr=q+Ne-bt-_r,Or=q+$r-bt,yt=ye(f?Ve(Ce,Sr):Ce,q,f?se(ne,Or):ne);E[g]=yt,I[g]=yt-q}if(a){var wt,Er=g==="x"?M:L,Cr=g==="x"?W:V,oe=E[w],je=w==="y"?"height":"width",xt=oe+h[Er],$t=oe-h[Cr],Ge=[M,L].indexOf(b)!==-1,_t=(wt=T?.[w])!=null?wt:0,St=Ge?xt:oe-P[je]-j[je]-_t+A.altAxis,Ot=Ge?oe+P[je]+j[je]-_t-A.altAxis:$t,Et=f&&Ge?An(St,oe,Ot):ye(f?St:xt,oe,f?Ot:$t);E[w]=Et,I[w]=Et-oe}t.modifiersData[n]=I}}const oi={name:"preventOverflow",enabled:!0,phase:"main",fn:ii,requiresIfExists:["offset"]};function si(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ai(e){return e===U(e)||!z(e)?ht(e):si(e)}function li(e){var t=e.getBoundingClientRect(),r=pe(t.width)/e.offsetWidth||1,n=pe(t.height)/e.offsetHeight||1;return r!==1||n!==1}function ci(e,t,r){r===void 0&&(r=!1);var n=z(t),i=z(t)&&li(t),o=te(t),s=de(e,i,r),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((X(t)!=="body"||gt(o))&&(a=ai(t)),z(t)?(c=de(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=mt(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function ui(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!r.has(a)){var c=t.get(a);c&&i(c)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function fi(e){var t=ui(e);return $n.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function pi(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function di(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var Vt={placement:"bottom",modifiers:[],strategy:"absolute"};function Ut(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function vi(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?Vt:i;return function(a,c,u){u===void 0&&(u=o);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vt,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},m=[],d=!1,f={state:l,setOptions:function(b){var S=typeof b=="function"?b(l.options):b;p(),l.options=Object.assign({},o,l.options,S),l.scrollParents={reference:ae(a)?we(a):a.contextElement?we(a.contextElement):[],popper:we(c)};var C=fi(di([].concat(n,l.options.modifiers)));return l.orderedModifiers=C.filter(function(g){return g.enabled}),v(),f.update()},forceUpdate:function(){if(!d){var b=l.elements,S=b.reference,C=b.popper;if(!!Ut(S,C)){l.rects={reference:ci(S,Ee(C),l.options.strategy==="fixed"),popper:dt(C)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(A){return l.modifiersData[A.name]=Object.assign({},A.data)});for(var g=0;g<l.orderedModifiers.length;g++){if(l.reset===!0){l.reset=!1,g=-1;continue}var w=l.orderedModifiers[g],E=w.fn,P=w.options,j=P===void 0?{}:P,x=w.name;typeof E=="function"&&(l=E({state:l,options:j,name:x,instance:f})||l)}}}},update:pi(function(){return new Promise(function(h){f.forceUpdate(),h(l)})}),destroy:function(){p(),d=!0}};if(!Ut(a,c))return f;f.setOptions(u).then(function(h){!d&&u.onFirstUpdate&&u.onFirstUpdate(h)});function v(){l.orderedModifiers.forEach(function(h){var b=h.name,S=h.options,C=S===void 0?{}:S,g=h.effect;if(typeof g=="function"){var w=g({state:l,name:b,instance:f,options:C}),E=function(){};m.push(w||E)}})}function p(){m.forEach(function(h){return h()}),m=[]}return f}}var hi=[Ln,ri,Bn,On,ei,Gn,oi,kn,Qn],mi=vi({defaultModifiers:hi});const gi=_('<span class="p-2 px-4 rounded bg-base-100 flex gap-4 shadow-xl"></span>'),bi=_('<span tabindex="0" class="inline-flex"></span>'),yi=_('<div class="z-50 relative"></div>'),wi=e=>(()=>{const t=$(gi);return O(t,()=>e.children),t})(),De=e=>{const[t,r]=R(),[n,i]=R(),[o,s]=R(!1),[a,c]=R(!1);let u,l;Gt(()=>{u&&u.destroy()});function m(){console.log("messag",e.message),l=window.setTimeout(()=>{s(!0),c(!0),f(),e.onShow?.()},200)}function d(){window.clearTimeout(l),c(!1),setTimeout(()=>{s(!1),e.onHide?.()},180)}function f(){const v=t(),p=n();v&&p&&(u=mi(v,p,{placement:e.placement||"bottom",modifiers:[{name:"offset",options:{offset:[0,10]}}]}))}return[(()=>{const v=$(bi);return v.addEventListener("blur",d),v.addEventListener("mouseleave",d),v.addEventListener("focus",m),v.addEventListener("mouseenter",m),Ct(r,v),O(v,()=>e.children),B(p=>Zt(v,{[e.class||""]:!!e.class},p)),v})(),y(F,{get when(){return o()},get children(){return y(Qt,{get children(){const v=$(yi);return Ct(i,v),O(v,y(Dr,{appear:!0,onBeforeEnter:p=>p.style.opacity="0.3",onAfterEnter:p=>p.style.opacity="1",onEnter:(p,h)=>{p.animate([{opacity:.3,transform:"scale(0.7)"},{opacity:1,transform:"scale(1)"}],{duration:140}).finished.then(h)},onExit:(p,h)=>{p.animate([{opacity:1},{opacity:0}],{duration:100}).finished.then(h)},get children(){return y(F,{get when(){return a()},get children(){return y(Jt,{get children(){return[y(Le,{get when(){return e.content},get children(){return e.content}}),y(Le,{get when(){return e.message},get children(){return y(wi,{get children(){return e.message}})}})]}})}})}})),v}})}})]},xi=_('<img class="w-full h-full object-cover">'),$i=_('<div class="w-64 h-64 flex items-center justify-center shadow-xl"></div>'),_i=_('<div class="font-bold opacity-75 overflow-hidden"><div class="flex gap-1 items-center w-full"><span class="material-symbols-outlined text-success">image</span><span class="truncate font-semibold"></span></div></div>'),Si=_('<div class="result-table-cell title"></div>'),Oi=_('<div class="result-table-cell before"><div class="text-sm text-center font-bold text-error"><!#><!/> MB</div></div>'),Ei=_('<div class="h-8 flex gap-1 items-center justify-center opacity-75 font-semibold"><span class="badge badge-success">-<!#><!/>%</span></div>'),Ci=_('<div class="result-table-cell status"></div>'),Ai=_('<div class="h-8 w-full flex justify-center items-center text-center"><span class="text-sm font-bold text-success"><!#><!/> MB</span></div>'),Pi=_('<div class="result-table-cell after"></div>'),Ti=_('<button class="btn btn-circle btn-ghost text-error btn-sm" type="button"><span class="material-symbols-outlined">backspace</span></button>'),ji=_('<button class="btn btn-circle btn-ghost btn-sm" type="button"><span class="material-symbols-outlined text-info">compare</span></button>'),ki=_('<button class="btn btn-circle btn-ghost btn-sm" type="button"><span class="material-symbols-outlined">download</span></button>'),Ii=_('<div class="result-table-cell actions"><div class="w-full flex justify-center"><!#><!/><!#><!/><!#><!/></div></div>'),qt=_('<div class="h-8 flex justify-center items-center"></div>'),Yt=tr.bytesToMb;function Ri(e,t="",r=""){const i=at.addPrefixAndSuffix(e,t,r);if(i.length>20){const o=Math.floor(10),s=i.slice(0,o),a=i.slice(-o);return`${s}...${a}`}return i}const Di=e=>{const[t,r]=R("");return Kt(async()=>{e.image.previewSrc||await e.image.createPreviewSrc(),r(e.image.previewSrc)}),(()=>{const n=$($i);return O(n,y(F,{get when(){return t()},get fallback(){return y(He,{})},get children(){const i=$(xi);return B(o=>{const s=t(),a=e.image.initial.name;return s!==o._v$&&xe(i,"src",o._v$=s),a!==o._v$2&&xe(i,"alt",o._v$2=a),o},{_v$:void 0,_v$2:void 0}),i}})),n})()},Bi=e=>{const t=We,r=st(()=>e.image),[n,i]=R(!1);let o;Kt(async()=>{await s(),o=We.state.shouldRecompress$.subscribe(()=>{s()})}),Gt(()=>{o&&o.unsubscribe()});async function s(){if(n())return;i(!0);const u=await jr.image(e.image.initial,{...t.state.settings});r().compress=u,e.onCompressed?.(r()),i(!1)}async function a(){const u=r().compress;if(u){const l=at.addPrefixAndSuffix(u.name,t.state.settings.prefix,t.state.settings.suffix),m=new File([u],l);rr.file(m)}}function c(){e.onRemove?.(r())}return[(()=>{const u=$(Si);return O(u,y(De,{placement:"right",get content(){return y(Di,{get image(){return r()}})},class:"w-full",get children(){const l=$(_i),m=l.firstChild,d=m.firstChild,f=d.nextSibling;return O(f,()=>Ri(r().initial.name,t.state.settings.prefix,t.state.settings.suffix)),B(()=>xe(f,"title",r().initial.name)),l}})),u})(),(()=>{const u=$(Oi),l=u.firstChild,m=l.firstChild,[d,f]=D(m.nextSibling);return d.nextSibling,O(l,()=>Yt(r().initial.size),d,f),u})(),(()=>{const u=$(Ci);return O(u,y(F,{get when(){return!n()},get fallback(){return(()=>{const l=$(qt);return O(l,y(He,{size:"sm"})),l})()},get children(){const l=$(Ei),m=l.firstChild,d=m.firstChild,f=d.nextSibling,[v,p]=D(f.nextSibling);return v.nextSibling,O(m,()=>r().percentDif,v,p),l}})),u})(),(()=>{const u=$(Pi);return O(u,y(F,{get when(){return!n()},get fallback(){return(()=>{const l=$(qt);return O(l,y(He,{size:"sm"})),l})()},get children(){const l=$(Ai),m=l.firstChild,d=m.firstChild,[f,v]=D(d.nextSibling);return f.nextSibling,O(m,()=>Yt(r().compress?.size||0),f,v),l}})),u})(),(()=>{const u=$(Ii),l=u.firstChild,m=l.firstChild,[d,f]=D(m.nextSibling),v=d.nextSibling,[p,h]=D(v.nextSibling),b=p.nextSibling,[S,C]=D(b.nextSibling);return O(l,y(De,{message:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",placement:"top",get children(){const g=$(Ti);return g.$$click=c,B(()=>g.classList.toggle("invisible",!!n())),Z(),g}}),d,f),O(l,y(De,{message:"\u0421\u0440\u0430\u0432\u043D\u0438\u0442\u044C",placement:"top",get children(){const g=$(ji);return g.$$click=()=>e.onCompare?.(e.image),B(()=>g.classList.toggle("invisible",!!n())),Z(),g}}),p,h),O(l,y(De,{message:"\u0412\u044B\u0433\u0440\u0443\u0437\u0438\u0442\u044C",placement:"top",get children(){const g=$(ki);return g.$$click=a,B(()=>g.classList.toggle("invisible",!!n())),Z(),g}}),S,C),u})()]};Ue(["click"]);const Mi=_('<div class="w-full h-full overflow-hidden"></div>'),Li=_('<div class="modal-box rounded p-2 max-w-screen-2xl"><!#><!/><div class="modal-action"><button type="button" class="btn">\u0417\u0430\u043A\u0440\u044B\u0442\u044C</button></div></div>'),Hi=_('<div class="modal"></div>'),Fi=_('<div class="max-h-[80vh] h-full p-10 flex justify-center items-center"></div>'),Nt=_("<img>"),zi=e=>{const[t,r]=R(!!e.show),[n,i]=R(!0);R(!1);const[o,s]=R(""),[a,c]=R("");return er(async()=>{if(e.show){r(!0);const{initial:u,compress:l}=e.image||{};if(u&&l){i(!0);const m=await Ke.createSrc(u),d=await Ke.createSrc(l);s(m),c(d),setTimeout(()=>{i(!1)},350)}}}),y(F,{get when(){return t()},get children(){return y(Qt,{get children(){const u=$(Hi);return At(u,"click",e.onClose,!0),O(u,y(nr,{appear:!0,onExit:()=>{r(!1)},get children(){return y(F,{get when(){return e.show},get children(){const l=$(Li),m=l.firstChild,[d,f]=D(m.nextSibling),v=d.nextSibling,p=v.firstChild;return l.$$click=h=>h.stopPropagation(),O(l,y(F,{get when(){return!n()},get fallback(){return(()=>{const h=$(Fi);return O(h,y(He,{})),h})()},get children(){const h=$(Mi);return O(h,y(Mr,{class:"max-h-[80vh]",get before(){return(()=>{const b=$(Nt);return B(()=>xe(b,"src",o())),b})()},get after(){return(()=>{const b=$(Nt);return B(()=>xe(b,"src",a())),b})()}})),h}}),d,f),At(p,"click",e.onClose,!0),Z(),l}})}})),B(()=>u.classList.toggle("modal-open",!!t())),Z(),u}})}})};Ue(["click"]);const Wi=_('<div class="text-center result-table-cell th title">\u0418\u043C\u044F</div>'),Vi=_('<div class="text-center result-table-cell th before">\u0414\u043E</div>'),Ui=_('<div class="text-center result-table-cell th status">\u0421\u0442\u0430\u0442\u0443\u0441</div>'),qi=_('<div class="text-center result-table-cell th after">\u041F\u043E\u0441\u043B\u0435</div>'),Yi=_('<div class="text-center result-table-cell th actions">\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F</div>'),Ni=_('<div class="overflow-x-auto rounded py-1"><div class="result-table"><!#><!/><!#><!/></div><!#><!/></div>'),Xi=e=>{const[t,r]=R(!1),[n,i]=R();return(()=>{const o=$(Ni),s=o.firstChild,a=s.firstChild,[c,u]=D(a.nextSibling),l=c.nextSibling,[m,d]=D(l.nextSibling),f=s.nextSibling,[v,p]=D(f.nextSibling);return O(s,y(F,{get when(){return e.images.length},get children(){return[$(Wi),$(Vi),$(Ui),$(qi),$(Yi)]}}),c,u),O(s,y(Br,{onBeforeEnter:h=>h.style.height="0",onAfterEnter:h=>h.style.height=h.scrollHeight+"px",onEnter:(h,b)=>{h.animate([{opacity:0,height:0},{opacity:1,height:h.scrollHeight+"px"}],{duration:200,easing:"cubic-bezier(0.1, -0.3, 0.2, 0)"}).finished.then(b)},onExit:(h,b)=>{h.animate([{opacity:1,height:h.scrollHeight+"px"},{opacity:0,height:0}],{duration:100,easing:"cubic-bezier(0.1, -0.3, 0.2, 0)"}).finished.then(b)},get children(){return y(F,{get when(){return e.images.length},get fallback(){return[]},get children(){return y(Ar,{get each(){return e.images},children:h=>y(Bi,{image:h,get onCompressed(){return e.onImageCompress},get onRemove(){return e.onImageRemove},onCompare:()=>{i(h),r(!0)}})})}})}}),m,d),O(o,y(zi,{get show(){return t()},get image(){return n()},onClose:()=>r(!1)}),v,p),o})()},Gi=_('<section class="flex flex-col items-center gap-1"><span class="text-4xl font-black opacity-90"><!#><!/>%</span><span><span class="text-error font-black"><!#><!/> MB</span> / <span class="text-success font-black"><!#><!/> MB</span></span></section>'),Je={initialSize:0,compressedSize:0,percent:0,isDone:!1},Xt=tr.bytesToMb,Zi=e=>{const t=st(()=>e.images),[r,n]=R({...Je});return er(Pr(t,i=>{if(!i.length){n({...Je});return}if([...i].every(s=>!!s.compress)){const s={...Je};[...i].forEach(a=>{s.initialSize+=a.initial.size,s.compressedSize+=a.compress?.size||0}),s.percent=Math.ceil(100-100/s.initialSize*(s.compressedSize||0)),s.isDone=!0,n(s)}})),y(F,{get when(){return r().isDone},get children(){const i=$(Gi),o=i.firstChild,s=o.firstChild,[a,c]=D(s.nextSibling);a.nextSibling;const u=o.nextSibling,l=u.firstChild,m=l.firstChild,[d,f]=D(m.nextSibling);d.nextSibling;const v=l.nextSibling,p=v.nextSibling,h=p.firstChild,[b,S]=D(h.nextSibling);return b.nextSibling,O(o,()=>r().percent,a,c),O(l,()=>Xt(r().initialSize),d,f),O(p,()=>Xt(r().compressedSize),b,S),i}})},Qi=_('<div class="form-control w-full"><label class="label"><span class="label-text">\u041A\u0430\u0447\u0435\u0441\u0442\u0432\u043E</span><span class="label-text-alt">\u043E\u0442 20 - 100%</span></label><div class="flex gap-4"><input type="range" min="20" max="100" class="range range-sm range-primary"><span></span></div></div>'),Ji=_('<div class="h-72 flex items-center justify-center"><article class="p-10 w-full h-full flex-1 flex flex-col"><!#><!/><section class="w-full flex flex-row gap-2"><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u0428\u0438\u0440\u0438\u043D\u0430</span><span class="label-text-alt">*\u0434\u043B\u044F \u0432\u0441\u0435\u0445</span></label><input type="number" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E" class="input input-sm input-bordered w-full"></div><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u0412\u044B\u0441\u043E\u0442\u0430</span><span class="label-text-alt">*\u0434\u043B\u044F \u0432\u0441\u0435\u0445</span></label><input type="number" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E" class="input input-sm input-bordered w-full"></div></section><section class="w-full flex flex-row gap-2"><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u041F\u0440\u0435\u0444\u0438\u043A\u0441</span></label><input type="text" placeholder="\u041F\u0440\u0435\u0444\u0438\u043A\u0441-" class="input input-sm input-bordered w-full"></div><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u0421\u0443\u0444\u0444\u0438\u043A\u0441</span></label><input type="text" placeholder="-\u0421\u0443\u0444\u0438\u043A\u0441" class="input input-sm input-bordered w-full"></div></section></article></div>'),Ki=e=>{const[t,r]=R((e.value||.8)*100);function n(i){const o=Number(i.target.value);r(o),e.onChange?.(o)}return(()=>{const i=$(Qi),o=i.firstChild,s=o.nextSibling,a=s.firstChild,c=a.nextSibling;return a.$$input=n,O(c,t),B(()=>a.value=t()),Z(),i})()},eo=()=>{const e=We,t={quality:e.state.settings.quality,prefix:e.state.settings.prefix||"",suffix:e.state.settings.suffix||"",width:e.state.settings.width,height:e.state.settings.height};return(()=>{const r=$(Ji),n=r.firstChild,i=n.firstChild,[o,s]=D(i.nextSibling),a=o.nextSibling,c=a.firstChild,u=c.firstChild,l=u.nextSibling,m=c.nextSibling,d=m.firstChild,f=d.nextSibling,v=a.nextSibling,p=v.firstChild,h=p.firstChild,b=h.nextSibling,S=p.nextSibling,C=S.firstChild,g=C.nextSibling;return O(n,y(Ki,{get value(){return t.quality},onChange:w=>e.mergeSettings({quality:w/100})}),o,s),l.$$input=w=>e.mergeSettings({width:Number(w.currentTarget.value)}),f.$$input=w=>e.mergeSettings({height:Number(w.currentTarget.value)}),b.$$input=w=>e.mergeSettings({prefix:w.currentTarget.value}),g.$$input=w=>e.mergeSettings({suffix:w.currentTarget.value}),B(()=>l.value=t.width),B(()=>f.value=t.height),B(()=>b.value=t.prefix),B(()=>g.value=t.suffix),Z(),r})()};Ue(["input"]);const to=_('<div class="transition-all"></div>'),ro=_('<footer class="flex gap-4 items-center justify-between p-2 rounded"><button class="btn btn-error btn-outline btn-xs">\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C</button><!#><!/><button class="btn btn-primary btn-outline btn-xs">\u0421\u043A\u0430\u0447\u0430\u0442\u044C</button></footer>'),no=_('<section class="flex flex-1 flex-col gap-4 p-2"><div class="flex flex-col gap-6 max-w-2xl w-full mx-auto rounded"><div class="shadow"><header class="flex items-center"><span class="flex-1"></span></header></div><div class="shadow rounded p-2 result-border"><header class="w-full flex gap-1"><div class="flex-1"></div><button type="button" class="btn btn-sm">\u0421\u0436\u0430\u0442\u0438\u0435</button><button type="button" class="btn btn-sm">\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438</button></header><!#><!/></div><div></div><div></div></div></section>'),fo=()=>{const e=We,[t,r]=R(!1),[n,i]=R("compress"),o=st(()=>Array.from(e.state.images));function s(d){const f=[];for(let v of d)if(a(v.type)){const p=new Ke(v);f.push(p)}else console.warn(`image type [${v.type}] not access`);e.setImages(f),i("settings")}function a(d){return Rr.some(f=>d.includes(f))}function c(){e.reset(),i("compress")}function u(){const d=o().map(f=>{const v=f.compress;if(v){const p=at.addPrefixAndSuffix(v.name,e.state.settings.prefix,e.state.settings.suffix);return new File([v],p)}}).filter(f=>f instanceof File);rr.zip(d)}function l(d){e.compressImage(d)}function m(d){e.removeImage(d),e.state.images.size||i("compress")}return(()=>{const d=$(no),f=d.firstChild,v=f.firstChild,p=v.nextSibling,h=p.firstChild,b=h.firstChild,S=b.nextSibling,C=S.nextSibling,g=h.nextSibling,[w,E]=D(g.nextSibling),P=p.nextSibling,j=P.nextSibling;return S.$$click=()=>i("compress"),C.$$click=()=>i("settings"),O(p,y(nr,{mode:"outin",get children(){return y(Jt,{get children(){return[y(Le,{get when(){return n()==="compress"},get children(){return y(kr,{onDropFiles:s})}}),y(Le,{get when(){return n()==="settings"},get children(){return y(eo,{})}})]}})}}),w,E),O(P,y(Ir,{onEnteredChange:r,onDropFiles:s,get children(){const x=$(to);return O(x,y(Xi,{get images(){return o()},onImageCompress:l,onImageRemove:m,onLoadAll:u})),B(A=>Zt(x,{"opacity-50 scale-95":t()},A)),x}})),O(j,y(F,{get when(){return o().length},get children(){const x=$(ro),A=x.firstChild,T=A.nextSibling,[I,k]=D(T.nextSibling),G=I.nextSibling;return A.$$click=c,O(x,y(Zi,{get images(){return o()}}),I,k),G.$$click=u,Z(),x}})),B(x=>{const A=n()==="compress",T=n()==="settings",I=o().length&&"shadow"||"",k=o().length&&"shadow"||"";return A!==x._v$&&S.classList.toggle("btn-primary",x._v$=A),T!==x._v$2&&C.classList.toggle("btn-primary",x._v$2=T),I!==x._v$3&&Pt(P,x._v$3=I),k!==x._v$4&&Pt(j,x._v$4=k),x},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),Z(),d})()};Ue(["click"]);export{fo as ImageCompressor};
