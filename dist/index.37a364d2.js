import{c as F,g as m,a as _,i as c,b as s,S as L,F as K,t as p,d as G,e as I,r as j,f as O,h as B,j as U,M as Z,k as W}from"./chunks/web.fe524d5d.js";import{R as X,C as Y,I as P,a as ee}from"./chunks/ResultStats.b291223a.js";import{d as te}from"./chunks/download.d3c04f97.js";import{T as le,S as se,C as ne,i as ie}from"./chunks/Scale.c4673c7e.js";import{C as ae,D as re,A as oe}from"./chunks/CompressDropZone.11899b10.js";/* empty css                              */import"./chunks/ImageCompareSlider.8aa9261a.js";import{D as ce}from"./chunks/DropButton.a7d9a9ab.js";import"./chunks/utils.85802971.js";import"./chunks/Loader.085a7fa9.js";import"./chunks/Tooltip.e39dc9f4.js";import"./chunks/Icon.27390969.js";const ue=p('<div class="text-center result-table-cell th title">\u0418\u043C\u044F</div>'),ge=p('<div class="text-center result-table-cell th before">\u0414\u043E</div>'),de=p('<div class="text-center result-table-cell th status">\u0421\u0442\u0430\u0442\u0443\u0441</div>'),me=p('<div class="text-center result-table-cell th after">\u041F\u043E\u0441\u043B\u0435</div>'),pe=p('<div class="text-center result-table-cell th actions">\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F</div>'),fe=p('<div class="overflow-x-auto rounded py-1"><div class="result-table"><!#><!/><!#><!/></div><!#><!/></div>'),$e=e=>{const[u,h]=F(!1),[f,r]=F();return(()=>{const t=m(fe),g=t.firstChild,b=g.firstChild,[x,R]=_(b.nextSibling),E=x.nextSibling,[A,i]=_(E.nextSibling),a=g.nextSibling,[o,d]=_(a.nextSibling);return c(g,s(L,{get when(){return e.images.length},get children(){return[m(ue),m(ge),m(de),m(me),m(pe)]}}),x,R),c(g,s(le,{onBeforeEnter:n=>n.style.height="0",onAfterEnter:n=>n.style.height=n.scrollHeight+"px",onEnter:(n,v)=>{n.animate([{opacity:0,height:0},{opacity:1,height:n.scrollHeight+"px"}],{duration:200,easing:"cubic-bezier(0.1, -0.3, 0.2, 0)"}).finished.then(v)},onExit:(n,v)=>{n.animate([{opacity:1,height:n.scrollHeight+"px"},{opacity:0,height:0}],{duration:100,easing:"cubic-bezier(0.1, -0.3, 0.2, 0)"}).finished.then(v)},get children(){return s(L,{get when(){return e.images.length},get fallback(){return[]},get children(){return s(K,{get each(){return e.images},children:n=>s(X,{image:n,get onCompressed(){return e.onImageCompress},get onRemove(){return e.onImageRemove},onCompare:()=>{r(n),h(!0)}})})}})}}),A,i),c(t,s(Y,{get show(){return u()},get image(){return f()},onClose:()=>h(!1)}),o,d),t})()},be=p('<div class="form-control w-full"><label class="label"><span class="label-text">\u041A\u0430\u0447\u0435\u0441\u0442\u0432\u043E</span><span class="label-text-alt">\u043E\u0442 20 - 100%</span></label><div class="flex gap-4"><input type="range" min="20" max="100" class="range range-sm range-primary"><span></span></div></div>'),he=p('<div class="h-72 flex items-center justify-center"><article class="p-10 w-full h-full flex-1 flex flex-col"><!#><!/><section class="w-full flex flex-row gap-2"><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u0428\u0438\u0440\u0438\u043D\u0430</span><span class="label-text-alt">*\u0434\u043B\u044F \u0432\u0441\u0435\u0445</span></label><input type="number" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E" class="input input-sm input-bordered w-full"></div><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u0412\u044B\u0441\u043E\u0442\u0430</span><span class="label-text-alt">*\u0434\u043B\u044F \u0432\u0441\u0435\u0445</span></label><input type="number" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E" class="input input-sm input-bordered w-full"></div></section><section class="w-full flex flex-row gap-2"><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u041F\u0440\u0435\u0444\u0438\u043A\u0441</span></label><input type="text" placeholder="\u041F\u0440\u0435\u0444\u0438\u043A\u0441-" class="input input-sm input-bordered w-full"></div><div class="form-control max-w-full w-1/2"><label class="label"><span class="label-text">\u0421\u0443\u0444\u0444\u0438\u043A\u0441</span></label><input type="text" placeholder="-\u0421\u0443\u0444\u0438\u043A\u0441" class="input input-sm input-bordered w-full"></div></section></article></div>'),xe=e=>{const[u,h]=F((e.value||.8)*100);function f(r){const t=Number(r.target.value);h(t),e.onChange?.(t)}return(()=>{const r=m(be),t=r.firstChild,g=t.nextSibling,b=g.firstChild,x=b.nextSibling;return b.$$input=f,c(x,u),I(()=>b.value=u()),j(),r})()},_e=()=>{const e=P,u={quality:e.state.settings.quality,prefix:e.state.settings.prefix||"",suffix:e.state.settings.suffix||"",width:e.state.settings.width,height:e.state.settings.height};return(()=>{const h=m(he),f=h.firstChild,r=f.firstChild,[t,g]=_(r.nextSibling),b=t.nextSibling,x=b.firstChild,R=x.firstChild,E=R.nextSibling,A=x.nextSibling,i=A.firstChild,a=i.nextSibling,o=b.nextSibling,d=o.firstChild,n=d.firstChild,v=n.nextSibling,w=d.nextSibling,N=w.firstChild,M=N.nextSibling;return c(f,s(xe,{get value(){return u.quality},onChange:$=>e.mergeSettings({quality:$/100})}),t,g),E.$$input=$=>e.mergeSettings({width:Number($.currentTarget.value)}),a.$$input=$=>e.mergeSettings({height:Number($.currentTarget.value)}),v.$$input=$=>e.mergeSettings({prefix:$.currentTarget.value}),M.$$input=$=>e.mergeSettings({suffix:$.currentTarget.value}),I(()=>E.value=u.width),I(()=>a.value=u.height),I(()=>v.value=u.prefix),I(()=>M.value=u.suffix),j(),h})()};G(["input"]);const ve=p('<div class="w-full flex items-center justify-center"></div>'),we=p('<div class="transition-all"><!#><!/><!#><!/></div>'),Se=p('<footer class="flex gap-4 items-center justify-between p-2 rounded"><button class="btn btn-error btn-outline btn-xs">\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C</button><!#><!/><button class="btn btn-primary btn-outline btn-xs">\u0421\u043A\u0430\u0447\u0430\u0442\u044C (<!#><!/>)</button></footer>'),Ce=p('<section class="flex flex-1 flex-col gap-4 p-2"><div class="flex flex-col gap-6 max-w-2xl w-full mx-auto rounded"><div class="shadow"><header class="flex items-center"><span class="flex-1"></span></header></div><div class="shadow rounded p-2 result-border"><header class="w-full flex gap-1"><div class="flex-1"></div><button type="button" class="btn btn-sm">\u0421\u0436\u0430\u0442\u0438\u0435</button><button type="button" class="btn btn-sm">\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438</button></header><!#><!/></div><div></div><div></div></div></section>'),je=()=>{const e=P,[u,h]=F(!1),[f,r]=F("compress"),t=O(()=>Array.from(e.state.images));function g(i){const a=[];for(let o of i)if(b(o.type)){const d=new ne(o);a.push(d)}else console.warn(`image type [${o.type}] not access`);e.setImages(a),r("settings")}function b(i){return oe.some(a=>i.includes(a))}function x(){e.reset(),r("compress")}function R(){const i=t().map(a=>{const o=a.compress;if(o){const d=ie.addPrefixAndSuffix(o.name,e.state.settings.prefix,e.state.settings.suffix);return new File([o],d)}}).filter(a=>a instanceof File);te.zip(i)}function E(i){e.compressImage(i)}function A(i){e.removeImage(i),e.state.images.size||r("compress")}return(()=>{const i=m(Ce),a=i.firstChild,o=a.firstChild,d=o.nextSibling,n=d.firstChild,v=n.firstChild,w=v.nextSibling,N=w.nextSibling,M=n.nextSibling,[$,Q]=_(M.nextSibling),q=d.nextSibling,H=q.nextSibling;return w.$$click=()=>r("compress"),N.$$click=()=>r("settings"),c(d,s(se,{mode:"outin",get children(){return s(U,{get children(){return[s(Z,{get when(){return f()==="compress"},get children(){return s(ae,{onDropFiles:g})}}),s(Z,{get when(){return f()==="settings"},get children(){return s(_e,{})}})]}})}}),$,Q),c(q,s(re,{onEnteredChange:h,onDropFiles:g,get children(){const l=m(we),S=l.firstChild,[C,y]=_(S.nextSibling),T=C.nextSibling,[D,z]=_(T.nextSibling);return c(l,s($e,{get images(){return t()},onImageCompress:E,onImageRemove:A,onLoadAll:R}),C,y),c(l,s(L,{get when(){return t().length},get children(){const k=m(ve);return c(k,s(ce,{class:"btn-sm btn-outline mt-4",onDropFiles:g,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0435\u0449\u0435"})),k}}),D,z),I(k=>W(l,{"opacity-50 scale-95":u()},k)),l}})),c(H,s(L,{get when(){return t().length},get children(){const l=m(Se),S=l.firstChild,C=S.nextSibling,[y,T]=_(C.nextSibling),D=y.nextSibling,z=D.firstChild,k=z.nextSibling,[V,J]=_(k.nextSibling);return V.nextSibling,S.$$click=x,c(l,s(ee,{get images(){return t()}}),y,T),D.$$click=R,c(D,()=>t().length,V,J),j(),l}})),I(l=>{const S=f()==="compress",C=f()==="settings",y=t().length&&"shadow"||"",T=t().length&&"shadow"||"";return S!==l._v$&&w.classList.toggle("btn-primary",l._v$=S),C!==l._v$2&&N.classList.toggle("btn-primary",l._v$2=C),y!==l._v$3&&B(q,l._v$3=y),T!==l._v$4&&B(H,l._v$4=T),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),j(),i})()};G(["click"]);export{je as ImageCompressor};
