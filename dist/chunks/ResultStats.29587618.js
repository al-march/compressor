import{c as I,o as qt,g as $,u as xt,i as O,e as X,l as $r,b as x,P as Yt,S as N,k as _r,M as St,t as E,d as Xt,h as Nt,n as Gt,p as xe,a as U,r as ge,q as Jt,v as $t,w as Or}from"./web.1f0c9ab8.js";import{c as Kt,a as Er,i as Qt,d as Ar,C as _t}from"./download.dbe2a9b7.js";import{L as Le}from"./Loader.8d5d67cf.js";import{a as Cr,S as Pr}from"./Scale.46a37a8d.js";import{I as jr}from"./ImageCompareSlider.7ea4f812.js";import{c as Tr}from"./store.9ae76bba.js";var Je=function(t,e){return Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Je(t,e)};function Q(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Je(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Ke(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function le(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function V(t){return typeof t=="function"}function Zt(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Xe=Zt(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function He(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var _e=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Ke(s),l=a.next();!l.done;l=a.next()){var u=l.value;u.remove(this)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else s.remove(this);var c=this.initialTeardown;if(V(c))try{c()}catch(f){o=f instanceof Xe?f.errors:[f]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var v=Ke(d),p=v.next();!p.done;p=v.next()){var h=p.value;try{Ot(h)}catch(f){o=o??[],f instanceof Xe?o=le(le([],ce(o)),ce(f.errors)):o.push(f)}}}catch(f){n={error:f}}finally{try{p&&!p.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}}if(o)throw new Xe(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Ot(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&He(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&He(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),er=_e.EMPTY;function tr(t){return t instanceof _e||t&&"closed"in t&&V(t.remove)&&V(t.add)&&V(t.unsubscribe)}function Ot(t){V(t)?t():t.unsubscribe()}var rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Qe={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Qe.delegate;return i?.setTimeout?i.setTimeout.apply(i,le([t,e],ce(r))):setTimeout.apply(void 0,le([t,e],ce(r)))},clearTimeout:function(t){var e=Qe.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function kr(t){Qe.setTimeout(function(){throw t})}function Et(){}var ke=null;function Ie(t){if(rt.useDeprecatedSynchronousErrorHandling){var e=!ke;if(e&&(ke={errorThrown:!1,error:null}),t(),e){var r=ke,n=r.errorThrown,i=r.error;if(ke=null,n)throw i}}else t()}var nt=function(t){Q(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,tr(r)&&r.add(n)):n.destination=Ir,n}return e.create=function(r,n,i){return new Ze(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(_e),Rr=Function.prototype.bind;function Ne(t,e){return Rr.call(t,e)}var Dr=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Re(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Re(n)}else Re(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Re(r)}},t}(),Ze=function(t){Q(e,t);function e(r,n,i){var o=t.call(this)||this,s;if(V(r)||!r)s={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;o&&rt.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},s={next:r.next&&Ne(r.next,a),error:r.error&&Ne(r.error,a),complete:r.complete&&Ne(r.complete,a)}):s=r}return o.destination=new Dr(s),o}return e}(nt);function Re(t){kr(t)}function Br(t){throw t}var Ir={closed:!0,next:Et,error:Br,complete:Et},Mr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Lr(t){return t}function Hr(t){return t.length===0?Lr:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var At=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=zr(e)?e:new Ze(e,r,n);return Ie(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Ct(r),new r(function(i,o){var s=new Ze({next:function(a){try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Mr]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Hr(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Ct(e),new e(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function Ct(t){var e;return(e=t??rt.Promise)!==null&&e!==void 0?e:Promise}function Wr(t){return t&&V(t.next)&&V(t.error)&&V(t.complete)}function zr(t){return t&&t instanceof nt||Wr(t)&&tr(t)}function Fr(t){return V(t?.lift)}function Ur(t){return function(e){if(Fr(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Vr(t,e,r,n,i){return new qr(t,e,r,n,i)}var qr=function(t){Q(e,t);function e(r,n,i,o,s,a){var l=t.call(this,r)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=n?function(u){try{n(u)}catch(c){r.error(c)}}:t.prototype._next,l._error=o?function(u){try{o(u)}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(nt),Yr=Zt(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),it=function(t){Q(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new Pt(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new Yr},e.prototype.next=function(r){var n=this;Ie(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=Ke(n.currentObservers),a=s.next();!a.done;a=s.next()){var l=a.value;l.next(r)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(r){var n=this;Ie(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},e.prototype.complete=function(){var r=this;Ie(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?er:(this.currentObservers=null,a.push(r),new _e(function(){n.currentObservers=null,He(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?r.error(o):s&&r.complete()},e.prototype.asObservable=function(){var r=new At;return r.source=this,r},e.create=function(r,n){return new Pt(r,n)},e}(At),Pt=function(t){Q(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},e.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:er},e}(it),rr={now:function(){return(rr.delegate||Date).now()},delegate:void 0},Xr=function(t){Q(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(_e),We={setInterval:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=We.delegate;return i?.setInterval?i.setInterval.apply(i,le([t,e],ce(r))):setInterval.apply(void 0,le([t,e],ce(r)))},clearInterval:function(t){var e=We.delegate;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},Nr=function(t){Q(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),We.setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&We.clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,He(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Xr),jt=function(){function t(e,r){r===void 0&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(n,r)},t.now=rr.now,t}(),Gr=function(t){Q(e,t);function e(r,n){n===void 0&&(n=jt.now);var i=t.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(jt),Jr=new Gr(Nr);function nr(t,e){return e===void 0&&(e=Jr),Ur(function(r,n){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var u=o;o=null,n.next(u)}};function l(){var u=s+t,c=e.now();if(c<u){i=this.schedule(void 0,u-c),n.add(i);return}a()}r.subscribe(Vr(n,function(u){o=u,s=e.now(),i||(i=e.schedule(l,t),n.add(i))},function(){a(),n.complete()},void 0,function(){o=i=null}))})}const ir=new it,Kr={quality:.8},or=new it,[G,ve]=Tr({images:new Set,settings:Kr,shouldRecompress$:or.pipe(nr(200))});function Qr(t){G.images.add(t),ve("images",new Set(G.images))}function Zr(t){const e=new Set(G.images);t.forEach(r=>e.add(r)),ve("images",e)}function en(t){const e=new Set(G.images);e.delete(t),ve("images",e)}function tn(t){G.images.add(t),ve("images",new Set(G.images))}function rn(){ve("images",new Set)}function sr(t){ve("settings",t),ir.next(t)}function nn(t){const e=Object.assign({...G.settings},t);sr(e)}function ar(){or.next({...G.settings})}ir.pipe(nr(300)).subscribe(()=>{console.log("recompress"),ar()});const Tt=Object.assign({},{state:G,setImage:Qr,setImages:Zr,removeImage:en,compressImage:tn,reset:rn,setSettings:sr,mergeSettings:nn,recompressAll:ar});var R="top",L="bottom",H="right",D="left",ot="auto",Oe=[R,L,H,D],ue="start",Se="end",on="clippingParents",cr="viewport",be="popper",sn="reference",kt=Oe.reduce(function(t,e){return t.concat([e+"-"+ue,e+"-"+Se])},[]),lr=[].concat(Oe,[ot]).reduce(function(t,e){return t.concat([e,e+"-"+ue,e+"-"+Se])},[]),an="beforeRead",cn="read",ln="afterRead",un="beforeMain",fn="main",pn="afterMain",dn="beforeWrite",vn="write",hn="afterWrite",mn=[an,cn,ln,un,fn,pn,dn,vn,hn];function Y(t){return t?(t.nodeName||"").toLowerCase():null}function W(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function se(t){var e=W(t).Element;return t instanceof e||t instanceof Element}function M(t){var e=W(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function st(t){if(typeof ShadowRoot>"u")return!1;var e=W(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function bn(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},o=e.elements[r];!M(o)||!Y(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function gn(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],o=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),a=s.reduce(function(l,u){return l[u]="",l},{});!M(i)||!Y(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const yn={name:"applyStyles",enabled:!0,phase:"write",fn:bn,effect:gn,requires:["computeStyles"]};function q(t){return t.split("-")[0]}var oe=Math.max,ze=Math.min,fe=Math.round;function et(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ur(){return!/^((?!chrome|android).)*safari/i.test(et())}function pe(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,o=1;e&&M(t)&&(i=t.offsetWidth>0&&fe(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&fe(n.height)/t.offsetHeight||1);var s=se(t)?W(t):window,a=s.visualViewport,l=!ur()&&r,u=(n.left+(l&&a?a.offsetLeft:0))/i,c=(n.top+(l&&a?a.offsetTop:0))/o,d=n.width/i,v=n.height/o;return{width:d,height:v,top:c,right:u+d,bottom:c+v,left:u,x:u,y:c}}function at(t){var e=pe(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function fr(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&st(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function J(t){return W(t).getComputedStyle(t)}function wn(t){return["table","td","th"].indexOf(Y(t))>=0}function Z(t){return((se(t)?t.ownerDocument:t.document)||window.document).documentElement}function Fe(t){return Y(t)==="html"?t:t.assignedSlot||t.parentNode||(st(t)?t.host:null)||Z(t)}function Rt(t){return!M(t)||J(t).position==="fixed"?null:t.offsetParent}function xn(t){var e=/firefox/i.test(et()),r=/Trident/i.test(et());if(r&&M(t)){var n=J(t);if(n.position==="fixed")return null}var i=Fe(t);for(st(i)&&(i=i.host);M(i)&&["html","body"].indexOf(Y(i))<0;){var o=J(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Ee(t){for(var e=W(t),r=Rt(t);r&&wn(r)&&J(r).position==="static";)r=Rt(r);return r&&(Y(r)==="html"||Y(r)==="body"&&J(r).position==="static")?e:r||xn(t)||e}function ct(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ye(t,e,r){return oe(t,ze(e,r))}function Sn(t,e,r){var n=ye(t,e,r);return n>r?r:n}function pr(){return{top:0,right:0,bottom:0,left:0}}function dr(t){return Object.assign({},pr(),t)}function vr(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var $n=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,dr(typeof e!="number"?e:vr(e,Oe))};function _n(t){var e,r=t.state,n=t.name,i=t.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,a=q(r.placement),l=ct(a),u=[D,H].indexOf(a)>=0,c=u?"height":"width";if(!(!o||!s)){var d=$n(i.padding,r),v=at(o),p=l==="y"?R:D,h=l==="y"?L:H,f=r.rects.reference[c]+r.rects.reference[l]-s[l]-r.rects.popper[c],m=s[l]-r.rects.reference[l],g=Ee(o),S=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,_=f/2-m/2,b=d[p],y=S-v[c]-d[h],w=S/2-v[c]/2+_,A=ye(b,w,y),j=l;r.modifiersData[n]=(e={},e[j]=A,e.centerOffset=A-w,e)}}function On(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!fr(e.elements.popper,i)||(e.elements.arrow=i))}const En={name:"arrow",enabled:!0,phase:"main",fn:_n,effect:On,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function de(t){return t.split("-")[1]}var An={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cn(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:fe(e*i)/i||0,y:fe(r*i)/i||0}}function Dt(t){var e,r=t.popper,n=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,v=s.x,p=v===void 0?0:v,h=s.y,f=h===void 0?0:h,m=typeof c=="function"?c({x:p,y:f}):{x:p,y:f};p=m.x,f=m.y;var g=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),_=D,b=R,y=window;if(u){var w=Ee(r),A="clientHeight",j="clientWidth";if(w===W(r)&&(w=Z(r),J(w).position!=="static"&&a==="absolute"&&(A="scrollHeight",j="scrollWidth")),w=w,i===R||(i===D||i===H)&&o===Se){b=L;var P=d&&w===y&&y.visualViewport?y.visualViewport.height:w[A];f-=P-n.height,f*=l?1:-1}if(i===D||(i===R||i===L)&&o===Se){_=H;var C=d&&w===y&&y.visualViewport?y.visualViewport.width:w[j];p-=C-n.width,p*=l?1:-1}}var T=Object.assign({position:a},u&&An),z=c===!0?Cn({x:p,y:f}):{x:p,y:f};if(p=z.x,f=z.y,l){var k;return Object.assign({},T,(k={},k[b]=S?"0":"",k[_]=g?"0":"",k.transform=(y.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",k))}return Object.assign({},T,(e={},e[b]=S?f+"px":"",e[_]=g?p+"px":"",e.transform="",e))}function Pn(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,s=o===void 0?!0:o,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:q(e.placement),variation:de(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Dt(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Dt(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const jn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Pn,data:{}};var De={passive:!0};function Tn(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,o=i===void 0?!0:i,s=n.resize,a=s===void 0?!0:s,l=W(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",r.update,De)}),a&&l.addEventListener("resize",r.update,De),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",r.update,De)}),a&&l.removeEventListener("resize",r.update,De)}}const kn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Tn,data:{}};var Rn={left:"right",right:"left",bottom:"top",top:"bottom"};function Me(t){return t.replace(/left|right|bottom|top/g,function(e){return Rn[e]})}var Dn={start:"end",end:"start"};function Bt(t){return t.replace(/start|end/g,function(e){return Dn[e]})}function lt(t){var e=W(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ut(t){return pe(Z(t)).left+lt(t).scrollLeft}function Bn(t,e){var r=W(t),n=Z(t),i=r.visualViewport,o=n.clientWidth,s=n.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var u=ur();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+ut(t),y:l}}function In(t){var e,r=Z(t),n=lt(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=oe(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=oe(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+ut(t),l=-n.scrollTop;return J(i||r).direction==="rtl"&&(a+=oe(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function ft(t){var e=J(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function hr(t){return["html","body","#document"].indexOf(Y(t))>=0?t.ownerDocument.body:M(t)&&ft(t)?t:hr(Fe(t))}function we(t,e){var r;e===void 0&&(e=[]);var n=hr(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),o=W(n),s=i?[o].concat(o.visualViewport||[],ft(n)?n:[]):n,a=e.concat(s);return i?a:a.concat(we(Fe(s)))}function tt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Mn(t,e){var r=pe(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function It(t,e,r){return e===cr?tt(Bn(t,r)):se(e)?Mn(e,r):tt(In(Z(t)))}function Ln(t){var e=we(Fe(t)),r=["absolute","fixed"].indexOf(J(t).position)>=0,n=r&&M(t)?Ee(t):t;return se(n)?e.filter(function(i){return se(i)&&fr(i,n)&&Y(i)!=="body"}):[]}function Hn(t,e,r,n){var i=e==="clippingParents"?Ln(t):[].concat(e),o=[].concat(i,[r]),s=o[0],a=o.reduce(function(l,u){var c=It(t,u,n);return l.top=oe(c.top,l.top),l.right=ze(c.right,l.right),l.bottom=ze(c.bottom,l.bottom),l.left=oe(c.left,l.left),l},It(t,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function mr(t){var e=t.reference,r=t.element,n=t.placement,i=n?q(n):null,o=n?de(n):null,s=e.x+e.width/2-r.width/2,a=e.y+e.height/2-r.height/2,l;switch(i){case R:l={x:s,y:e.y-r.height};break;case L:l={x:s,y:e.y+e.height};break;case H:l={x:e.x+e.width,y:a};break;case D:l={x:e.x-r.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?ct(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case ue:l[u]=l[u]-(e[c]/2-r[c]/2);break;case Se:l[u]=l[u]+(e[c]/2-r[c]/2);break}}return l}function $e(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,o=r.strategy,s=o===void 0?t.strategy:o,a=r.boundary,l=a===void 0?on:a,u=r.rootBoundary,c=u===void 0?cr:u,d=r.elementContext,v=d===void 0?be:d,p=r.altBoundary,h=p===void 0?!1:p,f=r.padding,m=f===void 0?0:f,g=dr(typeof m!="number"?m:vr(m,Oe)),S=v===be?sn:be,_=t.rects.popper,b=t.elements[h?S:v],y=Hn(se(b)?b:b.contextElement||Z(t.elements.popper),l,c,s),w=pe(t.elements.reference),A=mr({reference:w,element:_,strategy:"absolute",placement:i}),j=tt(Object.assign({},_,A)),P=v===be?j:w,C={top:y.top-P.top+g.top,bottom:P.bottom-y.bottom+g.bottom,left:y.left-P.left+g.left,right:P.right-y.right+g.right},T=t.modifiersData.offset;if(v===be&&T){var z=T[i];Object.keys(C).forEach(function(k){var ee=[H,L].indexOf(k)>=0?1:-1,te=[R,L].indexOf(k)>=0?"y":"x";C[k]+=z[te]*ee})}return C}function Wn(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,o=r.rootBoundary,s=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?lr:l,c=de(n),d=c?a?kt:kt.filter(function(h){return de(h)===c}):Oe,v=d.filter(function(h){return u.indexOf(h)>=0});v.length===0&&(v=d);var p=v.reduce(function(h,f){return h[f]=$e(t,{placement:f,boundary:i,rootBoundary:o,padding:s})[q(f)],h},{});return Object.keys(p).sort(function(h,f){return p[h]-p[f]})}function zn(t){if(q(t)===ot)return[];var e=Me(t);return[Bt(t),e,Bt(e)]}function Fn(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,a=s===void 0?!0:s,l=r.fallbackPlacements,u=r.padding,c=r.boundary,d=r.rootBoundary,v=r.altBoundary,p=r.flipVariations,h=p===void 0?!0:p,f=r.allowedAutoPlacements,m=e.options.placement,g=q(m),S=g===m,_=l||(S||!h?[Me(m)]:zn(m)),b=[m].concat(_).reduce(function(ae,K){return ae.concat(q(K)===ot?Wn(e,{placement:K,boundary:c,rootBoundary:d,padding:u,flipVariations:h,allowedAutoPlacements:f}):K)},[]),y=e.rects.reference,w=e.rects.popper,A=new Map,j=!0,P=b[0],C=0;C<b.length;C++){var T=b[C],z=q(T),k=de(T)===ue,ee=[R,L].indexOf(z)>=0,te=ee?"width":"height",B=$e(e,{placement:T,boundary:c,rootBoundary:d,altBoundary:v,padding:u}),F=ee?k?H:D:k?L:R;y[te]>w[te]&&(F=Me(F));var Ae=Me(F),re=[];if(o&&re.push(B[z]<=0),a&&re.push(B[F]<=0,B[Ae]<=0),re.every(function(ae){return ae})){P=T,j=!1;break}A.set(T,re)}if(j)for(var Ce=h?3:1,Ue=function(K){var me=b.find(function(je){var ne=A.get(je);if(ne)return ne.slice(0,K).every(function(Ve){return Ve})});if(me)return P=me,"break"},he=Ce;he>0;he--){var Pe=Ue(he);if(Pe==="break")break}e.placement!==P&&(e.modifiersData[n]._skip=!0,e.placement=P,e.reset=!0)}}const Un={name:"flip",enabled:!0,phase:"main",fn:Fn,requiresIfExists:["offset"],data:{_skip:!1}};function Mt(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Lt(t){return[R,H,L,D].some(function(e){return t[e]>=0})}function Vn(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=$e(e,{elementContext:"reference"}),a=$e(e,{altBoundary:!0}),l=Mt(s,n),u=Mt(a,i,o),c=Lt(l),d=Lt(u);e.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const qn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vn};function Yn(t,e,r){var n=q(t),i=[D,R].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[D,H].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}function Xn(t){var e=t.state,r=t.options,n=t.name,i=r.offset,o=i===void 0?[0,0]:i,s=lr.reduce(function(c,d){return c[d]=Yn(d,e.rects,o),c},{}),a=s[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=s}const Nn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Xn};function Gn(t){var e=t.state,r=t.name;e.modifiersData[r]=mr({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Jn={name:"popperOffsets",enabled:!0,phase:"read",fn:Gn,data:{}};function Kn(t){return t==="x"?"y":"x"}function Qn(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,a=s===void 0?!1:s,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,d=r.padding,v=r.tether,p=v===void 0?!0:v,h=r.tetherOffset,f=h===void 0?0:h,m=$e(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),g=q(e.placement),S=de(e.placement),_=!S,b=ct(g),y=Kn(b),w=e.modifiersData.popperOffsets,A=e.rects.reference,j=e.rects.popper,P=typeof f=="function"?f(Object.assign({},e.rects,{placement:e.placement})):f,C=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(!!w){if(o){var k,ee=b==="y"?R:D,te=b==="y"?L:H,B=b==="y"?"height":"width",F=w[b],Ae=F+m[ee],re=F-m[te],Ce=p?-j[B]/2:0,Ue=S===ue?A[B]:j[B],he=S===ue?-j[B]:-A[B],Pe=e.elements.arrow,ae=p&&Pe?at(Pe):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:pr(),me=K[ee],je=K[te],ne=ye(0,A[B],ae[B]),Ve=_?A[B]/2-Ce-ne-me-C.mainAxis:Ue-ne-me-C.mainAxis,br=_?-A[B]/2+Ce+ne+je+C.mainAxis:he+ne+je+C.mainAxis,qe=e.elements.arrow&&Ee(e.elements.arrow),gr=qe?b==="y"?qe.clientTop||0:qe.clientLeft||0:0,pt=(k=T?.[b])!=null?k:0,yr=F+Ve-pt-gr,wr=F+br-pt,dt=ye(p?ze(Ae,yr):Ae,F,p?oe(re,wr):re);w[b]=dt,z[b]=dt-F}if(a){var vt,xr=b==="x"?R:D,Sr=b==="x"?L:H,ie=w[y],Te=y==="y"?"height":"width",ht=ie+m[xr],mt=ie-m[Sr],Ye=[R,D].indexOf(g)!==-1,bt=(vt=T?.[y])!=null?vt:0,gt=Ye?ht:ie-A[Te]-j[Te]-bt+C.altAxis,yt=Ye?ie+A[Te]+j[Te]-bt-C.altAxis:mt,wt=p&&Ye?Sn(gt,ie,yt):ye(p?gt:ht,ie,p?yt:mt);w[y]=wt,z[y]=wt-ie}e.modifiersData[n]=z}}const Zn={name:"preventOverflow",enabled:!0,phase:"main",fn:Qn,requiresIfExists:["offset"]};function ei(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ti(t){return t===W(t)||!M(t)?lt(t):ei(t)}function ri(t){var e=t.getBoundingClientRect(),r=fe(e.width)/t.offsetWidth||1,n=fe(e.height)/t.offsetHeight||1;return r!==1||n!==1}function ni(t,e,r){r===void 0&&(r=!1);var n=M(e),i=M(e)&&ri(e),o=Z(e),s=pe(t,i,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((Y(e)!=="body"||ft(o))&&(a=ti(e)),M(e)?(l=pe(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=ut(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function ii(t){var e=new Map,r=new Set,n=[];t.forEach(function(o){e.set(o.name,o)});function i(o){r.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!r.has(a)){var l=e.get(a);l&&i(l)}}),n.push(o)}return t.forEach(function(o){r.has(o.name)||i(o)}),n}function oi(t){var e=ii(t);return mn.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function si(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function ai(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Ht={placement:"bottom",modifiers:[],strategy:"absolute"};function Wt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function ci(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,o=i===void 0?Ht:i;return function(a,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ht,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],v=!1,p={state:c,setOptions:function(g){var S=typeof g=="function"?g(c.options):g;f(),c.options=Object.assign({},o,c.options,S),c.scrollParents={reference:se(a)?we(a):a.contextElement?we(a.contextElement):[],popper:we(l)};var _=oi(ai([].concat(n,c.options.modifiers)));return c.orderedModifiers=_.filter(function(b){return b.enabled}),h(),p.update()},forceUpdate:function(){if(!v){var g=c.elements,S=g.reference,_=g.popper;if(!!Wt(S,_)){c.rects={reference:ni(S,Ee(_),c.options.strategy==="fixed"),popper:at(_)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(C){return c.modifiersData[C.name]=Object.assign({},C.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var y=c.orderedModifiers[b],w=y.fn,A=y.options,j=A===void 0?{}:A,P=y.name;typeof w=="function"&&(c=w({state:c,options:j,name:P,instance:p})||c)}}}},update:si(function(){return new Promise(function(m){p.forceUpdate(),m(c)})}),destroy:function(){f(),v=!0}};if(!Wt(a,l))return p;p.setOptions(u).then(function(m){!v&&u.onFirstUpdate&&u.onFirstUpdate(m)});function h(){c.orderedModifiers.forEach(function(m){var g=m.name,S=m.options,_=S===void 0?{}:S,b=m.effect;if(typeof b=="function"){var y=b({state:c,name:g,instance:p,options:_}),w=function(){};d.push(y||w)}})}function f(){d.forEach(function(m){return m()}),d=[]}return p}}var li=[kn,Jn,jn,yn,Nn,Un,Zn,En,qn],ui=ci({defaultModifiers:li});const fi=E('<span class="p-2 px-4 rounded bg-base-100 flex gap-4 shadow-xl"></span>'),pi=E('<span tabindex="0" class="inline-flex"></span>'),di=E('<div class="z-50 relative"></div>'),vi=t=>(()=>{const e=$(fi);return O(e,()=>t.children),e})(),Be=t=>{const[e,r]=I(),[n,i]=I(),[o,s]=I(!1),[a,l]=I(!1);let u,c;qt(()=>{u&&u.destroy()});function d(){console.log("messag",t.message),c=window.setTimeout(()=>{s(!0),l(!0),p(),t.onShow?.()},200)}function v(){window.clearTimeout(c),l(!1),setTimeout(()=>{s(!1),t.onHide?.()},180)}function p(){const h=e(),f=n();h&&f&&(u=ui(h,f,{placement:t.placement||"bottom",modifiers:[{name:"offset",options:{offset:[0,10]}}]}))}return[(()=>{const h=$(pi);return h.addEventListener("blur",v),h.addEventListener("mouseleave",v),h.addEventListener("focus",d),h.addEventListener("mouseenter",d),xt(r,h),O(h,()=>t.children),X(f=>$r(h,{[t.class||""]:!!t.class},f)),h})(),x(N,{get when(){return o()},get children(){return x(Yt,{get children(){const h=$(di);return xt(i,h),O(h,x(Cr,{appear:!0,onBeforeEnter:f=>f.style.opacity="0.3",onAfterEnter:f=>f.style.opacity="1",onEnter:(f,m)=>{f.animate([{opacity:.3,transform:"scale(0.7)"},{opacity:1,transform:"scale(1)"}],{duration:140}).finished.then(m)},onExit:(f,m)=>{f.animate([{opacity:1},{opacity:0}],{duration:100}).finished.then(m)},get children(){return x(N,{get when(){return a()},get children(){return x(_r,{get children(){return[x(St,{get when(){return t.content},get children(){return t.content}}),x(St,{get when(){return t.message},get children(){return x(vi,{get children(){return t.message}})}})]}})}})}})),h}})}})]},hi=E('<img class="w-full h-full object-cover">'),mi=E('<div class="w-64 h-64 flex items-center justify-center shadow-xl"></div>'),bi=E('<div class="font-bold opacity-75 overflow-hidden"><div class="flex gap-1 items-center w-full"><span class="material-symbols-outlined text-success">image</span><span class="truncate font-semibold"></span></div></div>'),gi=E('<div class="result-table-cell title"></div>'),yi=E('<div class="result-table-cell before"><div class="text-sm text-center font-bold text-error"><!#><!/> MB</div></div>'),wi=E('<div class="h-8 flex gap-1 items-center justify-center opacity-75 font-semibold"><span class="badge badge-success">-<!#><!/>%</span></div>'),xi=E('<div class="result-table-cell status"></div>'),Si=E('<div class="h-8 w-full flex justify-center items-center text-center"><span class="text-sm font-bold text-success"><!#><!/> MB</span></div>'),$i=E('<div class="result-table-cell after"></div>'),_i=E('<button class="btn btn-circle btn-ghost text-error btn-sm" type="button"><span class="material-symbols-outlined">backspace</span></button>'),Oi=E('<button class="btn btn-circle btn-ghost btn-sm" type="button"><span class="material-symbols-outlined text-info">compare</span></button>'),Ei=E('<button class="btn btn-circle btn-ghost btn-sm" type="button"><span class="material-symbols-outlined">download</span></button>'),Ai=E('<div class="result-table-cell actions"><div class="w-full flex justify-center"><!#><!/><!#><!/><!#><!/></div></div>'),zt=E('<div class="h-8 flex justify-center items-center"></div>'),Ft=Kt.bytesToMb;function Ci(t,e="",r=""){const i=Qt.addPrefixAndSuffix(t,e,r);if(i.length>20){const o=Math.floor(10),s=i.slice(0,o),a=i.slice(-o);return`${s}...${a}`}return i}const Pi=t=>{const[e,r]=I("");return Gt(async()=>{t.image.previewSrc||await t.image.createPreviewSrc(),r(t.image.previewSrc)}),(()=>{const n=$(mi);return O(n,x(N,{get when(){return e()},get fallback(){return x(Le,{})},get children(){const i=$(hi);return X(o=>{const s=e(),a=t.image.initial.name;return s!==o._v$&&xe(i,"src",o._v$=s),a!==o._v$2&&xe(i,"alt",o._v$2=a),o},{_v$:void 0,_v$2:void 0}),i}})),n})()},zi=t=>{const e=Tt,r=Nt(()=>t.image),[n,i]=I(!1);let o;Gt(async()=>{await s(),o=Tt.state.shouldRecompress$.subscribe(()=>{s()})}),qt(()=>{o&&o.unsubscribe()});async function s(){if(n())return;i(!0);const u=await Er.image(t.image.initial,{...e.state.settings});r().compress=u,t.onCompressed?.(r()),i(!1)}async function a(){const u=r().compress;if(u){const c=Qt.addPrefixAndSuffix(u.name,e.state.settings.prefix,e.state.settings.suffix),d=new File([u],c);Ar.file(d)}}function l(){t.onRemove?.(r())}return[(()=>{const u=$(gi);return O(u,x(Be,{placement:"right",get content(){return x(Pi,{get image(){return r()}})},class:"w-full",get children(){const c=$(bi),d=c.firstChild,v=d.firstChild,p=v.nextSibling;return O(p,()=>Ci(r().initial.name,e.state.settings.prefix,e.state.settings.suffix)),X(()=>xe(p,"title",r().initial.name)),c}})),u})(),(()=>{const u=$(yi),c=u.firstChild,d=c.firstChild,[v,p]=U(d.nextSibling);return v.nextSibling,O(c,()=>Ft(r().initial.size),v,p),u})(),(()=>{const u=$(xi);return O(u,x(N,{get when(){return!n()},get fallback(){return(()=>{const c=$(zt);return O(c,x(Le,{size:"sm"})),c})()},get children(){const c=$(wi),d=c.firstChild,v=d.firstChild,p=v.nextSibling,[h,f]=U(p.nextSibling);return h.nextSibling,O(d,()=>r().percentDif,h,f),c}})),u})(),(()=>{const u=$($i);return O(u,x(N,{get when(){return!n()},get fallback(){return(()=>{const c=$(zt);return O(c,x(Le,{size:"sm"})),c})()},get children(){const c=$(Si),d=c.firstChild,v=d.firstChild,[p,h]=U(v.nextSibling);return p.nextSibling,O(d,()=>Ft(r().compress?.size||0),p,h),c}})),u})(),(()=>{const u=$(Ai),c=u.firstChild,d=c.firstChild,[v,p]=U(d.nextSibling),h=v.nextSibling,[f,m]=U(h.nextSibling),g=f.nextSibling,[S,_]=U(g.nextSibling);return O(c,x(Be,{message:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",placement:"top",get children(){const b=$(_i);return b.$$click=l,X(()=>b.classList.toggle("invisible",!!n())),ge(),b}}),v,p),O(c,x(Be,{message:"\u0421\u0440\u0430\u0432\u043D\u0438\u0442\u044C",placement:"top",get children(){const b=$(Oi);return b.$$click=()=>t.onCompare?.(t.image),X(()=>b.classList.toggle("invisible",!!n())),ge(),b}}),f,m),O(c,x(Be,{message:"\u0412\u044B\u0433\u0440\u0443\u0437\u0438\u0442\u044C",placement:"top",get children(){const b=$(Ei);return b.$$click=a,X(()=>b.classList.toggle("invisible",!!n())),ge(),b}}),S,_),u})()]};Xt(["click"]);const ji=E('<div class="w-full h-full overflow-hidden"></div>'),Ti=E('<div class="modal-box rounded p-2 max-w-screen-2xl"><!#><!/><div class="modal-action"><button type="button" class="btn">\u0417\u0430\u043A\u0440\u044B\u0442\u044C</button></div></div>'),ki=E('<div class="modal"></div>'),Ri=E('<div class="max-h-[80vh] h-full p-10 flex justify-center items-center"></div>'),Ut=E("<img>"),Fi=t=>{const[e,r]=I(!!t.show),[n,i]=I(!0);I(!1);const[o,s]=I(""),[a,l]=I("");return Jt(async()=>{if(t.show){r(!0);const{initial:u,compress:c}=t.image||{};if(u&&c){i(!0);const d=await _t.createSrc(u),v=await _t.createSrc(c);s(d),l(v),setTimeout(()=>{i(!1)},350)}}}),x(N,{get when(){return e()},get children(){return x(Yt,{get children(){const u=$(ki);return $t(u,"click",t.onClose,!0),O(u,x(Pr,{appear:!0,onExit:()=>{r(!1)},get children(){return x(N,{get when(){return t.show},get children(){const c=$(Ti),d=c.firstChild,[v,p]=U(d.nextSibling),h=v.nextSibling,f=h.firstChild;return c.$$click=m=>m.stopPropagation(),O(c,x(N,{get when(){return!n()},get fallback(){return(()=>{const m=$(Ri);return O(m,x(Le,{})),m})()},get children(){const m=$(ji);return O(m,x(jr,{class:"max-h-[80vh]",withLabels:!0,get before(){return(()=>{const g=$(Ut);return X(()=>xe(g,"src",o())),g})()},get after(){return(()=>{const g=$(Ut);return X(()=>xe(g,"src",a())),g})()}})),m}}),v,p),$t(f,"click",t.onClose,!0),ge(),c}})}})),X(()=>u.classList.toggle("modal-open",!!e())),ge(),u}})}})};Xt(["click"]);const Di=E('<section class="flex flex-col items-center gap-1"><span class="text-4xl font-black opacity-90"><!#><!/>%</span><span><span class="text-error font-black"><!#><!/> MB</span> / <span class="text-success font-black"><!#><!/> MB</span></span></section>'),Ge={initialSize:0,compressedSize:0,percent:0,isDone:!1},Vt=Kt.bytesToMb,Ui=t=>{const e=Nt(()=>t.images),[r,n]=I({...Ge});return Jt(Or(e,i=>{if(!i.length){n({...Ge});return}if([...i].every(s=>!!s.compress)){const s={...Ge};[...i].forEach(a=>{s.initialSize+=a.initial.size,s.compressedSize+=a.compress?.size||0}),s.percent=Math.ceil(100-100/s.initialSize*(s.compressedSize||0)),s.isDone=!0,n(s)}})),x(N,{get when(){return r().isDone},get children(){const i=$(Di),o=i.firstChild,s=o.firstChild,[a,l]=U(s.nextSibling);a.nextSibling;const u=o.nextSibling,c=u.firstChild,d=c.firstChild,[v,p]=U(d.nextSibling);v.nextSibling;const h=c.nextSibling,f=h.nextSibling,m=f.firstChild,[g,S]=U(m.nextSibling);return g.nextSibling,O(o,()=>r().percent,a,l),O(c,()=>Vt(r().initialSize),v,p),O(f,()=>Vt(r().compressedSize),g,S),i}})};export{Fi as C,Tt as I,zi as R,Ui as a};
