import{c as S,x as R,h as q,y as z,q as F,z as $,A as M,b as X}from"./web.1f0c9ab8.js";function N(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}const Y=e=>{let c,r=!0;const[v,u]=S(),[A,w]=S(),g=R(()=>e.children),{onBeforeEnter:b,onEnter:y,onAfterEnter:h,onBeforeExit:E,onExit:T,onAfterExit:o}=e,f=q(()=>{const t=e.name||"s";return{enterActiveClass:e.enterActiveClass||t+"-enter-active",enterClass:e.enterClass||t+"-enter",enterToClass:e.enterToClass||t+"-enter-to",exitActiveClass:e.exitActiveClass||t+"-exit-active",exitClass:e.exitClass||t+"-exit",exitToClass:e.exitToClass||t+"-exit-to"}});function i(t,s){if(!r||e.appear){let d=function(C){t&&(!C||C.target===t)&&(t.removeEventListener("transitionend",d),t.removeEventListener("animationend",d),t.classList.remove(...l),t.classList.remove(...x),M(()=>{v()!==t&&u(t),A()===t&&w(void 0)}),h&&h(t),e.mode==="inout"&&a(t,s))};const m=f().enterClass.split(" "),l=f().enterActiveClass.split(" "),x=f().enterToClass.split(" ");b&&b(t),t.classList.add(...m),t.classList.add(...l),N(()=>{t.classList.remove(...m),t.classList.add(...x),y&&y(t,()=>d()),(!y||y.length<2)&&(t.addEventListener("transitionend",d),t.addEventListener("animationend",d))})}s&&!e.mode?w(t):u(t)}function a(t,s){const m=f().exitClass.split(" "),l=f().exitActiveClass.split(" "),x=f().exitToClass.split(" ");if(!s.parentNode)return d();E&&E(s),s.classList.add(...m),s.classList.add(...l),N(()=>{s.classList.remove(...m),s.classList.add(...x)}),T&&T(s,()=>d()),(!T||T.length<2)&&(s.addEventListener("transitionend",d),s.addEventListener("animationend",d));function d(C){(!C||C.target===s)&&(s.removeEventListener("transitionend",d),s.removeEventListener("animationend",d),s.classList.remove(...l),s.classList.remove(...x),v()===s&&u(void 0),o&&o(s),e.mode==="outin"&&i(t,s))}}return z(t=>{for(c=g();typeof c=="function";)c=c();return $(()=>(c&&c!==t&&(e.mode!=="outin"?i(c,t):r&&u(c)),t&&t!==c&&e.mode!=="inout"&&a(c,t),r=!1,c))}),[v,A]};function B(e){const{top:c,bottom:r,left:v,right:u,width:A,height:w}=e.getBoundingClientRect(),g=e.parentNode.getBoundingClientRect();return{top:c-g.top,bottom:r,left:v-g.left,right:u,width:A,height:w}}const G=e=>{const c=R(()=>e.children),r=q(()=>{const o=e.name||"s";return{enterActiveClass:e.enterActiveClass||o+"-enter-active",enterClass:e.enterClass||o+"-enter",enterToClass:e.enterToClass||o+"-enter-to",exitActiveClass:e.exitActiveClass||o+"-exit-active",exitClass:e.exitClass||o+"-exit",exitToClass:e.exitToClass||o+"-exit-to",moveClass:e.moveClass||o+"-move"}}),{onBeforeEnter:v,onEnter:u,onAfterEnter:A,onBeforeExit:w,onExit:g,onAfterExit:b}=e,[y,h]=S();let E=[],T=!0;return z(()=>{const o=c(),f=[...o],i=new Set(o),a=new Set(E),t=r().enterClass.split(" "),s=r().enterActiveClass.split(" "),m=r().enterToClass.split(" "),l=r().exitClass.split(" "),x=r().exitActiveClass.split(" "),d=r().exitToClass.split(" ");for(let C=0;C<o.length;C++){const n=o[C];if(!T&&!a.has(n)){let L=function(P){n&&(!P||P.target===n)&&(n.removeEventListener("transitionend",L),n.removeEventListener("animationend",L),n.classList.remove(...s),n.classList.remove(...m),A&&A(n))};v&&v(n),n.classList.add(...t),n.classList.add(...s),N(()=>{n.classList.remove(...t),n.classList.add(...m),u&&u(n,()=>L()),(!u||u.length<2)&&(n.addEventListener("transitionend",L),n.addEventListener("animationend",L))})}}for(let C=0;C<E.length;C++){const n=E[C];if(!i.has(n)&&n.parentNode){let L=function(P){(!P||P.target===n)&&(n.removeEventListener("transitionend",L),n.removeEventListener("animationend",L),n.classList.remove(...x),n.classList.remove(...d),b&&b(n),E=E.filter(D=>D!==n),h(E))};f.splice(C,0,n),w&&w(n),n.classList.add(...l),n.classList.add(...x),N(()=>{n.classList.remove(...l),n.classList.add(...d)}),g&&g(n,()=>L()),(!g||g.length<2)&&(n.addEventListener("transitionend",L),n.addEventListener("animationend",L))}}E=f,h(f)}),F(o=>{const f=y();return f.forEach(i=>{let a;(a=o.get(i))?a.new&&(a.new=!1,a.newPos=B(i)):o.set(i,a={pos:B(i),new:!T}),a.new&&i.addEventListener("transitionend",()=>{a.new=!1,i.parentNode&&(a.newPos=B(i))},{once:!0}),a.newPos&&(a.pos=a.newPos),a.newPos=B(i)}),T?(T=!1,o):(f.forEach(i=>{const a=o.get(i),t=a.pos,s=a.newPos,m=t.left-s.left,l=t.top-s.top;if(m||l){a.moved=!0;const x=i.style;x.transform=`translate(${m}px,${l}px)`,x.transitionDuration="0s"}}),document.body.offsetHeight,f.forEach(i=>{const a=o.get(i);if(a.moved){let m=function(l){l&&l.target!==i||!i.parentNode||(!l||/transform$/.test(l.propertyName))&&(i.removeEventListener("transitionend",m),i.classList.remove(...s))};a.moved=!1;const t=i.style,s=r().moveClass.split(" ");i.classList.add(...s),t.transform=t.transitionDuration="",i.addEventListener("transitionend",m)}}),o)},new Map),y},H=e=>{const c=()=>{e.onExit?.()};return X(Y,{get appear(){return e.appear},get mode(){return e.mode},onBeforeEnter:r=>r.style.opacity="0",onEnter:async(r,v)=>{await r.animate?.([{opacity:0,transform:"scale(0.8) translateX(-5px) translateY(20px)"},{opacity:1,transform:"scale(1) translateX(0) translateY(0)"}],{duration:160,easing:"cubic-bezier(0.55, 0, 0.55, 0.2)"}).finished,v()},onAfterEnter:r=>r.style.opacity="1",onExit:async(r,v)=>{await r.animate?.([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.90)"}],{duration:120,easing:"cubic-bezier(0.55, 0, 0.55, 0.2)"}).finished,c(),v()},get children(){return e.children}})};export{H as S,G as T,Y as a};
