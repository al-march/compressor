import{d,C as T}from"./chunks/download.dbe2a9b7.js";import{c as u,l as S,o as g,g as R,u as h,t as I,b as i,j as C,M as f}from"./chunks/web.ae784fa2.js";import{S as A}from"./chunks/Scale.3b9758ee.js";import{C as P}from"./chunks/CompressDropZone.ee0bb964.js";import"./chunks/ImageCompareSlider.f5435aba.js";/* empty css                              */const a={FINETUNE:"Finetune",FILTERS:"Filters",ADJUST:"Adjust",WATERMARK:"Watermark",ANNOTATE:"Annotate",RESIZE:"Resize"},F={CROP:"Crop",ROTATE:"Rotate",FLIP_X:"Flip_X",FLIP_Y:"Flip_Y",BRIGHTNESS:"Brightness",CONTRAST:"Contrast",HSV:"HueSaturationValue",WARMTH:"Warmth",BLUR:"Blur",THRESHOLD:"Threshold",POSTERIZE:"Posterize",PIXELATE:"Pixelate",NOISE:"Noise",FILTERS:"Filters",RECT:"Rect",ELLIPSE:"Ellipse",POLYGON:"Polygon",TEXT:"Text",LINE:"Line",IMAGE:"Image",ARROW:"Arrow",WATERMARK:"Watermark",PEN:"Pen",RESIZE:"Resize"};class y{static getConfig(){return{annotationsCommon:{fill:"#ff0000"},Text:{text:"Filerobot..."},Rotate:{angle:90,componentType:"slider"},translations:{profile:"Profile",coverPhoto:"Cover photo",facebook:"Facebook",socialMedia:"Social Media",fbProfileSize:"180x180px",fbCoverPhotoSize:"820x312px"},Crop:{presetsItems:[{titleKey:"classicTv",descriptionKey:"4:3",ratio:4/3},{titleKey:"cinemascope",descriptionKey:"21:9",ratio:21/9}],presetsFolders:[{titleKey:"socialMedia",groups:[{titleKey:"facebook",items:[{titleKey:"profile",width:180,height:180,descriptionKey:"fbProfileSize"},{titleKey:"coverPhoto",width:820,height:312,descriptionKey:"fbCoverPhotoSize"}]}]}]},tabsIds:[a.RESIZE,a.ADJUST,a.ANNOTATE],defaultTabId:a.ADJUST,defaultToolId:F.CROP}}}const N=I('<div id="image-editor"></div>'),O=t=>{const[r,n]=u(),[o,c]=u();S(()=>{setTimeout(()=>{l()})}),g(()=>{const e=o();e&&e.terminate()});function l(){const e=r();if(e){const s=new FilerobotImageEditor(e,{...y.getConfig(),source:t.source,onSave:p,onClose:m});s.render(),c(s)}}function m(e){t.onClose?.()}async function p(e,s){console.log(s);const E=await L(e.imageBase64||"",e.fullName||"",e.mimeType);return d.file(E)}return(()=>{const e=R(N);return h(n,e),e})()};function L(t,r,n){return fetch(t).then(function(o){return o.arrayBuffer()}).then(function(o){return new File([o],r,{type:n})})}const z=()=>{const[t,r]=u("");async function n(o){const[c]=o,l=await T.createSrc(c);r(l)}return i(A,{get children(){return i(C,{get children(){return[i(f,{get when(){return!t()},get children(){return i(P,{onDropFiles:n})}}),i(f,{get when(){return!!t()},get children(){return i(O,{get source(){return t()},onClose:()=>r("")})}})]}})}})};export{z as Editor};
